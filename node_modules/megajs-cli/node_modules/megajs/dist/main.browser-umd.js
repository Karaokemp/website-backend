/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 https://mths.be/punycode v1.4.1 by @mathias */
(function(J,la){"object"===typeof exports&&"undefined"!==typeof module?module.exports=la():"function"===typeof define&&define.amd?define(la):J.mega=la()})(this,function(){function J(a,b){return b={exports:{}},a(b,b.exports,Ib),b.exports}function la(){gb=!0;for(var a=0;64>a;++a)K[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],E["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;E[45]=62;E[95]=63}function Yc(a,b,c){for(var d=[],e=b;e<c;e+=3)b=
(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(K[b>>18&63]+K[b>>12&63]+K[b>>6&63]+K[b&63]);return d.join("")}function Jb(a){gb||la();for(var b=a.length,c=b%3,d="",e=[],f=0,g=b-c;f<g;f+=16383)e.push(Yc(a,f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=K[a>>2],d+=K[a<<4&63],d+="\x3d\x3d"):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=K[a>>10],d+=K[a>>4&63],d+=K[a<<2&63],d+="\x3d");e.push(d);return e.join("")}function Pa(a,b,c,d,e){var f;f=8*e-d-1;var g=(1<<f)-1,k=g>>1,l=-7;e=c?e-1:0;var p=c?-1:1,h=a[b+e];e+=p;c=h&(1<<-l)-1;h>>=
-l;for(l+=f;0<l;c=256*c+a[b+e],e+=p,l-=8);f=c&(1<<-l)-1;c>>=-l;for(l+=d;0<l;f=256*f+a[b+e],e+=p,l-=8);if(0===c)c=1-k;else{if(c===g)return f?NaN:Infinity*(h?-1:1);f+=Math.pow(2,d);c-=k}return(h?-1:1)*f*Math.pow(2,c-d)}function Kb(a,b,c,d,e,f){var g,k=8*f-e-1,l=(1<<k)-1,p=l>>1,h=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var n=d?1:-1,m=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=l):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+
p?b+h/g:b+h*Math.pow(2,1-p),2<=b*g&&(d++,g/=2),d+p>=l?(b=0,d=l):1<=d+p?(b=(b*g-1)*Math.pow(2,e),d+=p):(b=b*Math.pow(2,p-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+f]=b&255,f+=n,b/=256,e-=8);d=d<<e|b;for(k+=e;0<k;a[c+f]=d&255,f+=n,d/=256,k-=8);a[c+f-n]|=128*m}function O(a,b){if((h.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");h.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=h.prototype):(null===a&&(a=new h(b)),a.length=b);return a}function h(a,b,c){if(!(h.TYPED_ARRAY_SUPPORT||
this instanceof h))return new h(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return hb(this,a)}return Lb(this,a,b,c)}function Lb(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");
b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);h.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=h.prototype):a=ib(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!h.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=Mb(b,a)|0;d=O(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return Zc(a,b)}function Nb(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');
if(0>a)throw new RangeError('"size" argument must not be negative');}function hb(a,b){Nb(b);a=O(a,0>b?0:jb(b)|0);if(!h.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function ib(a,b){var c=0>b.length?0:jb(b.length)|0;a=O(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function Zc(a,b){if(L(b)){var c=jb(b.length)|0;a=O(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||
(c=b.length,c=c!==c),c?O(a,0):ib(a,b);if("Buffer"===b.type&&Ob(b.data))return ib(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function jb(a){if(a>=(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function L(a){return!(null==a||!a._isBuffer)}function Mb(a,b){if(L(a))return a.length;
if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return Qa(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return Pb(a).length;default:if(d)return Qa(a).length;b=
(""+b).toLowerCase();d=!0}}function $c(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return Qb(this,b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&
127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?Jb(this):Jb(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function ba(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function Rb(a,
b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=h.from(b,d));if(L(b))return 0===b.length?-1:Sb(a,b,c,d,e);if("number"===typeof b)return b&=255,h.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,
b,c):Sb(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function Sb(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,k=a.length,l=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;k/=2;l/=2;c/=2}if(e)for(d=-1;c<k;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===l)return d*g}else-1!==d&&(c-=c-d),d=-1;else for(c+l>k&&(c=k-l);0<=c;c--){k=!0;for(d=
0;d<l;d++)if(f(a,c+d)!==f(b,d)){k=!1;break}if(k)return c}return-1}function Qb(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?4:223<e?3:191<e?2:1;if(b+g<=c){var k,l,p;switch(g){case 1:128>e&&(f=e);break;case 2:k=a[b+1];128===(k&192)&&(e=(e&31)<<6|k&63,127<e&&(f=e));break;case 3:k=a[b+1];l=a[b+2];128===(k&192)&&128===(l&192)&&(e=(e&15)<<12|(k&63)<<6|l&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:k=a[b+1],l=a[b+2],p=a[b+3],128===(k&192)&&128===(l&192)&&128===(p&192)&&
(e=(e&15)<<18|(k&63)<<12|(l&63)<<6|p&63,65535<e&&1114112>e&&(f=e))}}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);b+=g}a=d.length;if(a<=Tb)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=Tb));d=c}return d}function x(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function D(a,b,c,d,e,f){if(!L(a))throw new TypeError('"buffer" argument must be a Buffer instance');
if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");}function Ra(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function Sa(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function Ub(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");
}function Vb(a,b,c,d,e){e||Ub(a,b,c,4,3.4028234663852886e+38,-3.4028234663852886e+38);Kb(a,b,c,d,23,4);return c+4}function Wb(a,b,c,d,e){e||Ub(a,b,c,8,1.7976931348623157e+308,-1.7976931348623157e+308);Kb(a,b,c,d,52,8);return c+8}function Qa(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,
191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function Xb(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function Pb(a){a=
(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(ad,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="\x3d";gb||la();var b,c,d,e,f;b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");e="\x3d"===a[b-2]?2:"\x3d"===a[b-1]?1:0;f=new bd(3*b/4-e);c=0<e?b-4:b;var g=0;for(b=0;b<c;b+=4)d=E[a.charCodeAt(b)]<<18|E[a.charCodeAt(b+1)]<<12|E[a.charCodeAt(b+2)]<<6|E[a.charCodeAt(b+3)],f[g++]=d>>16&255,f[g++]=d>>8&255,f[g++]=d&255;2===e?(d=E[a.charCodeAt(b)]<<2|E[a.charCodeAt(b+
1)]>>4,f[g++]=d&255):1===e&&(d=E[a.charCodeAt(b)]<<10|E[a.charCodeAt(b+1)]<<4|E[a.charCodeAt(b+2)]>>2,f[g++]=d>>8&255,f[g++]=d&255);return f}function xa(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Ta(a){return null!=a&&(!!a._isBuffer||Yb(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&Yb(a.slice(0,0)))}function Yb(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Zb(){throw Error("setTimeout has not been defined");
}function $b(){throw Error("clearTimeout has not been defined");}function ac(a){if(U===setTimeout)return setTimeout(a,0);if((U===Zb||!U)&&setTimeout)return U=setTimeout,setTimeout(a,0);try{return U(a,0)}catch(b){try{return U.call(null,a,0)}catch(c){return U.call(this,a,0)}}}function cd(a){if(V===clearTimeout)return clearTimeout(a);if((V===$b||!V)&&clearTimeout)return V=clearTimeout,clearTimeout(a);try{return V(a)}catch(b){try{return V.call(null,a)}catch(c){return V.call(this,a)}}}function dd(){ma&&
ca&&(ma=!1,ca.length?P=ca.concat(P):Ua=-1,P.length&&bc())}function bc(){if(!ma){var a=ac(dd);ma=!0;for(var b=P.length;b;){ca=P;for(P=[];++Ua<b;)ca&&ca[Ua].run();Ua=-1;b=P.length}ca=null;ma=!1;cd(a)}}function z(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];P.push(new cc(a,b));1!==P.length||ma||ac(bc)}function cc(a,b){this.fun=a;this.array=b}function da(){}function W(){}function q(){q.init.call(this)}function dc(a,b,c,d){var e,f;if("function"!==
typeof c)throw new TypeError('"listener" argument must be a function');(e=a._events)?(e.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),e=a._events),f=e[b]):(e=a._events=new W,a._eventsCount=0);f?("function"===typeof f?f=e[b]=d?[c,f]:[f,c]:d?f.unshift(c):f.push(c),f.warned||(c=void 0===a._maxListeners?q.defaultMaxListeners:a._maxListeners)&&0<c&&f.length>c&&(f.warned=!0,c=Error("Possible EventEmitter memory leak detected. "+f.length+" "+b+" listeners added. Use emitter.setMaxListeners() to increase limit"),
c.name="MaxListenersExceededWarning",c.emitter=a,c.type=b,c.count=f.length,"function"===typeof console.warn?console.warn(c):console.log(c))):(e[b]=c,++a._eventsCount);return a}function ec(a,b,c){function d(){a.removeListener(b,d);e||(e=!0,c.apply(a,arguments))}var e=!1;d.listener=c;return d}function fc(a){var b=this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function ya(a,b){for(var c=Array(b);b--;)c[b]=a[b];return c}function kb(a){if(!na(a)){for(var b=[],
c=0;c<arguments.length;c++)b.push(Q(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,e=d.length,b=String(a).replace(ed,function(a){if("%%"===a)return"%";if(c>=e)return a;switch(a){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":try{return JSON.stringify(d[c++])}catch(k){return"[Circular]"}default:return a}}),f=d[c];c<e;f=d[++c])b=null!==f&&X(f)?b+(" "+Q(f)):b+(" "+f);return b}function lb(a,b){if(R(oa.process))return function(){return lb(a,b).apply(this,arguments)};
if(!0===pa.noDeprecation)return a;var c=!1;return function(){if(!c){if(pa.throwDeprecation)throw Error(b);pa.traceDeprecation?console.trace(b):console.error(b);c=!0}return a.apply(this,arguments)}}function gc(a){R(mb)&&(mb=pa.env.NODE_DEBUG||"");a=a.toUpperCase();Va[a]||((new RegExp("\\b"+a+"\\b","i")).test(mb)?Va[a]=function(){var b=kb.apply(null,arguments);console.error("%s %d: %s",a,0,b)}:Va[a]=function(){});return Va[a]}function Q(a,b){var c={seen:[],stylize:fd};3<=arguments.length&&(c.depth=
arguments[2]);4<=arguments.length&&(c.colors=arguments[3]);nb(b)?c.showHidden=b:b&&hc(c,b);R(c.showHidden)&&(c.showHidden=!1);R(c.depth)&&(c.depth=2);R(c.colors)&&(c.colors=!1);R(c.customInspect)&&(c.customInspect=!0);c.colors&&(c.stylize=gd);return Wa(c,a,c.depth)}function gd(a,b){return(b=Q.styles[b])?"\u001b["+Q.colors[b][0]+"m"+a+"\u001b["+Q.colors[b][1]+"m":a}function fd(a,b){return a}function hd(a){var b={};a.forEach(function(a,d){b[a]=!0});return b}function Wa(a,b,c){if(a.customInspect&&b&&
Xa(b.inspect)&&b.inspect!==Q&&(!b.constructor||b.constructor.prototype!==b)){var d=b.inspect(c,a);na(d)||(d=Wa(a,d,c));return d}if(d=id(a,b))return d;var e=Object.keys(b),f=hd(e);a.showHidden&&(e=Object.getOwnPropertyNames(b));if(Ya(b)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return ob(b);if(0===e.length){if(Xa(b))return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(Za(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(pb(b))return a.stylize(Date.prototype.toString.call(b),
"date");if(Ya(b))return ob(b)}var d="",g=!1,k=["{","}"];ic(b)&&(g=!0,k=["[","]"]);Xa(b)&&(d=" [Function"+(b.name?": "+b.name:"")+"]");Za(b)&&(d=" "+RegExp.prototype.toString.call(b));pb(b)&&(d=" "+Date.prototype.toUTCString.call(b));Ya(b)&&(d=" "+ob(b));if(0===e.length&&(!g||0==b.length))return k[0]+d+k[1];if(0>c)return Za(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);e=g?jd(a,b,c,f,e):e.map(function(d){return qb(a,b,c,f,d,g)});a.seen.pop();
return kd(e,d,k)}function id(a,b){if(R(b))return a.stylize("undefined","undefined");if(na(b))return b="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if(jc(b))return a.stylize(""+b,"number");if(nb(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function ob(a){return"["+Error.prototype.toString.call(a)+"]"}function jd(a,b,c,d,e){for(var f=[],g=0,k=b.length;g<k;++g)Object.prototype.hasOwnProperty.call(b,String(g))?
f.push(qb(a,b,c,d,String(g),!0)):f.push("");e.forEach(function(e){e.match(/^\d+$/)||f.push(qb(a,b,c,d,e,!0))});return f}function qb(a,b,c,d,e,f){var g,k;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?k=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(k=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(d,e)||(g="["+e+"]");k||(0>a.seen.indexOf(b.value)?(k=null===c?Wa(a,b.value,null):Wa(a,b.value,c-1),-1<k.indexOf("\n")&&(k=f?k.split("\n").map(function(a){return"  "+
a}).join("\n").substr(2):"\n"+k.split("\n").map(function(a){return"   "+a}).join("\n"))):k=a.stylize("[Circular]","special"));if(R(g)){if(f&&e.match(/^\d+$/))return k;g=JSON.stringify(""+e);g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+k}function kd(a,b,c){var d=0;return 60<a.reduce(function(a,b){d++;0<=b.indexOf("\n")&&d++;return a+b.replace(/\u001b\[\d\d?m/g,
"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function ic(a){return Array.isArray(a)}function nb(a){return"boolean"===typeof a}function jc(a){return"number"===typeof a}function na(a){return"string"===typeof a}function R(a){return void 0===a}function Za(a){return X(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}function X(a){return"object"===typeof a&&null!==a}function pb(a){return X(a)&&"[object Date]"===Object.prototype.toString.call(a)}
function Ya(a){return X(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function Xa(a){return"function"===typeof a}function rb(a){return 10>a?"0"+a.toString(10):a.toString(10)}function ld(){var a=new Date,b=[rb(a.getHours()),rb(a.getMinutes()),rb(a.getSeconds())].join(":");return[a.getDate(),md[a.getMonth()],b].join(" ")}function hc(a,b){if(!b||!X(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}function ea(){this.tail=this.head=null;this.length=
0}function za(a){this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,"");if(a&&!nd(a))throw Error("Unknown encoding: "+a);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=2;this.detectIncompleteChar=od;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=pd;break;default:this.write=qd;return}this.charBuffer=new h(6);this.charLength=this.charReceived=0}function qd(a){return a.toString(this.encoding)}function od(a){this.charLength=
(this.charReceived=a.length%2)?2:0}function pd(a){this.charLength=(this.charReceived=a.length%3)?3:0}function rd(a,b,c){if("function"===typeof a.prependListener)return a.prependListener(b,c);if(a._events&&a._events[b])Array.isArray(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]];else a.on(b,c)}function kc(a,b){a=a||{};this.objectMode=!!a.objectMode;b instanceof F&&(this.objectMode=this.objectMode||!!a.readableObjectMode);b=a.highWaterMark;var c=this.objectMode?16:16384;this.highWaterMark=
b||0===b?b:c;this.highWaterMark=~~this.highWaterMark;this.buffer=new ea;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(this.decoder=new za(a.encoding),this.encoding=a.encoding)}function u(a){if(!(this instanceof
u))return new u(a);this._readableState=new kc(a,this);this.readable=!0;a&&"function"===typeof a.read&&(this._read=a.read);q.call(this)}function lc(a,b,c,d,e){var f;f=c;var g=null;Ta(f)||"string"===typeof f||null===f||void 0===f||b.objectMode||(g=new TypeError("Invalid non-string/buffer chunk"));if(f=g)a.emit("error",f);else if(null===c)b.reading=!1,b.ended||(b.decoder&&(c=b.decoder.end())&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length),b.ended=!0,$a(a));else if(b.objectMode||c&&0<
c.length)if(b.ended&&!e)a.emit("error",Error("stream.push() after EOF"));else if(b.endEmitted&&e)a.emit("error",Error("stream.unshift() after end event"));else{var k;!b.decoder||e||d||(c=b.decoder.write(c),k=!b.objectMode&&0===c.length);e||(b.reading=!1);k||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&$a(a)));b.readingMore||(b.readingMore=!0,z(sd,a,b))}else e||(b.reading=!1);return!b.ended&&
(b.needReadable||b.length<b.highWaterMark||0===b.length)}function mc(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var c=a;8388608<=c?c=8388608:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++);b.highWaterMark=c}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}function $a(a){var b=a._readableState;b.needReadable=!1;b.emittedReadable||(r("emitReadable",b.flowing),b.emittedReadable=
!0,b.sync?z(nc,a):nc(a))}function nc(a){r("emit readable");a.emit("readable");sb(a)}function sd(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(r("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function td(a){return function(){var b=a._readableState;r("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,sb(a))}}function ud(a){r("readable nexttick read 0");a.read(0)}function vd(a,
b){b.reading||(r("resume read 0"),a.read(0));b.resumeScheduled=!1;b.awaitDrain=0;a.emit("resume");sb(a);b.flowing&&!b.reading&&a.read(0)}function sb(a){var b=a._readableState;for(r("flow",b.flowing);b.flowing&&null!==a.read(););}function oc(a,b){if(0===b.length)return null;var c;if(b.objectMode)c=b.buffer.shift();else if(!a||a>=b.length)c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear();else{c=b.buffer;b=b.decoder;if(a<c.head.data.length)b=
c.head.data.slice(0,a),c.head.data=c.head.data.slice(a);else{if(a===c.head.data.length)c=c.shift();else if(b){b=c.head;var d=1,e=b.data;for(a-=e.length;b=b.next;){var f=b.data,g=a>f.length?f.length:a,e=g===f.length?e+f:e+f.slice(0,a);a-=g;if(0===a){g===f.length?(++d,c.head=b.next?b.next:c.tail=null):(c.head=b,b.data=f.slice(g));break}++d}c.length-=d;c=e}else{b=h.allocUnsafe(a);d=c.head;e=1;d.data.copy(b);for(a-=d.data.length;d=d.next;){f=d.data;g=a>f.length?f.length:a;f.copy(b,b.length-a,0,g);a-=
g;if(0===a){g===f.length?(++e,c.head=d.next?d.next:c.tail=null):(c.head=d,d.data=f.slice(g));break}++e}c.length-=e;c=b}b=c}c=b}return c}function tb(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,z(wd,b,a))}function wd(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function xd(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function pc(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;
return-1}function yd(){}function zd(a,b,c){this.chunk=a;this.encoding=b;this.callback=c;this.next=null}function ub(a,b){Object.defineProperty(this,"buffer",{get:lb(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")});a=a||{};this.objectMode=!!a.objectMode;b instanceof F&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var c=a.highWaterMark,d=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:d;this.highWaterMark=~~this.highWaterMark;
this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var c=b._writableState,d=c.sync,e=c.writecb;c.writing=!1;c.writecb=null;c.length-=c.writelen;c.writelen=0;a?(--c.pendingcb,d?z(e,a):e(a),b._writableState.errorEmitted=!0,b.emit("error",a)):((a=qc(c))||c.corked||c.bufferProcessing||!c.bufferedRequest||rc(b,
c),d?z(sc,b,c,a,e):sc(b,c,a,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new tc(this)}function B(a){if(!(this instanceof B||this instanceof F))return new B(a);this._writableState=new ub(a,this);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev));q.call(this)}function vb(a,b,
c,d,e,f,g){b.writelen=d;b.writecb=g;b.writing=!0;b.sync=!0;c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite);b.sync=!1}function sc(a,b,c,d){!c&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;d();uc(a,b)}function rc(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=Array(b.bufferedRequestCount),e=b.corkedRequestsFree;e.entry=c;for(var f=0;c;)d[f]=c,c=c.next,f+=1;vb(a,b,!0,b.length,d,"",e.finish);b.pendingcb++;b.lastBufferedRequest=null;e.next?
(b.corkedRequestsFree=e.next,e.next=null):b.corkedRequestsFree=new tc(b)}else{for(;c&&(d=c.chunk,vb(a,b,!1,b.objectMode?1:d.length,d,c.encoding,c.callback),c=c.next,!b.writing););null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0;b.bufferedRequest=c;b.bufferProcessing=!1}function qc(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function uc(a,b){var c=qc(b);c&&(0===b.pendingcb?(b.prefinished||(b.prefinished=!0,a.emit("prefinish")),b.finished=!0,a.emit("finish")):
b.prefinished||(b.prefinished=!0,a.emit("prefinish")));return c}function tc(a){var b=this;this.entry=this.next=null;this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--;e(c);d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}function F(a){if(!(this instanceof F))return new F(a);u.call(this,a);B.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&
(this.allowHalfOpen=!1);this.once("end",Ad)}function Ad(){this.allowHalfOpen||this._writableState.ended||z(Bd,this)}function Bd(a){a.end()}function Cd(a){this.afterTransform=function(b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;e?(d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b),b=a._readableState,b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&a._read(b.highWaterMark),b=void 0):b=a.emit("error",Error("no writecb in Transform class"));return b};this.transforming=
this.needTransform=!1;this.writeencoding=this.writechunk=this.writecb=null}function M(a){if(!(this instanceof M))return new M(a);F.call(this,a);this._transformState=new Cd(this);var b=this;this._readableState.needReadable=!0;this._readableState.sync=!1;a&&("function"===typeof a.transform&&(this._transform=a.transform),"function"===typeof a.flush&&(this._flush=a.flush));this.once("prefinish",function(){"function"===typeof this._flush?this._flush(function(a){vc(b,a)}):vc(b)})}function vc(a,b){if(b)return a.emit("error",
b);b=a._transformState;if(a._writableState.length)throw Error("Calling transform done when ws.length !\x3d 0");if(b.transforming)throw Error("Calling transform done when still transforming");return a.push(null)}function qa(a){if(!(this instanceof qa))return new qa(a);M.call(this,a)}function A(){q.call(this)}function wb(a,b){var c=[],d=void 0;a.on("data",function(a){c.push(a)});a.on("end",function(){d||(d=!0,b(null,h.concat(c)))});a.on("error",function(a){d||(d=!0,b(a))})}function wc(a){var b=void 0;
return fa(function(c){b&&(c=h.concat([b,c]));var d=Math.floor(c.length/a)*a;d?c.length>d?(b=c.slice(d),this.emit("data",c.slice(0,d))):(b=void 0,this.emit("data",c)):b=b?h.concat([b,c]):c},function(){b&&this.emit("data",b);this.emit("end")})}function Dd(a){var b=[],c=0;return fa(function(a){b.push(a);c+=a.length},function(){a(c);b.forEach(this.emit.bind(this,"data"));this.emit("end")})}function Ed(a){var b,c,d,e=[2479122403,2108737444,3518906241,22203222];for(d=65536;d--;)for(c=0;c<a.length;c+=16){var f=
[0,0,0,0];for(b=0;16>b;b+=4)b+c<a.length&&(f[b/4]=a.readInt32BE(b+c,!0));e=(new xb(f)).encrypt(e)}a=h.allocUnsafe(16);for(b=0;4>b;b++)a.writeInt32BE(e[b],4*b,!0);return a}function H(a){return"string"===typeof a?xc(a):a}function C(a){return a.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function xc(a){a+="\x3d\x3d".substr(2-3*a.length&3);a=a.replace(/-/g,"+").replace(/_/g,"/").replace(/,/g,"");return h.from(a,"base64")}function ra(a){return new Y(yc(a).slice(0,16))}function zc(a){var b=
(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).start||0;if(0!==b)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");(a=H(a))||(a=ab(24));a instanceof h||(a=h.from(a));var c=fa(function(a){e.encrypt(a);this.emit("data",a)},function(){var b=e.condensedMac(),d=c,k=a,l=h.allocUnsafe(32);k.copy(l);b.copy(l,24);for(b=0;16>b;b++)l.writeUInt8(l.readUInt8(b)^l.readUInt8(16+b),b);d.key=l;this.emit("end")});if(24!==a.length)return z(function(){c.emit("error",
Error("Wrong key length. Key must be 192bit."))});var d=new Y(a.slice(0,16)),e=new Ac(d,a.slice(16),b);return c=Aa(wc(16),c)}function Bc(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=b.start||0;0!==c&&(b.disableVerification=!0);if(0!==c%16)throw Error("start argument of megaDecrypt must be a multiple of 16");a=H(a);var d=fa(function(a){f.decrypt(a);this.emit("data",a)},function(){if(!f.condensedMac().equals(a.slice(24))&&!b.disableVerification)return this.emit("error",Error("MAC verification failed"));
this.emit("end")}),e=ra(a),f=new Ac(e,a.slice(16),c);return d=Aa(wc(16),d)}function yc(a){var b=h.allocUnsafe(32);a.copy(b);for(a=0;16>a;a++)b.writeUInt8(b.readUInt8(a)^b.readUInt8(16+a,!0),a);return b}function Ba(a){for(var b=[];0<a--;)b[a]=0;return b}function Ca(a){var b=a.length;if(a[b-1])return a;for(;1<b&&0===a[b-1];)b--;return a.slice(0,b)}function Cc(a,b){var c=a.length,d=b.length;if(c<d)return Cc(b,a);for(var e=[],f=0,g=0;g<d;g++)f+=a[g]+b[g],e[g]=f&268435455,f>>>=28;for(;g<c;g++)f+=a[g],
e[g]=f&268435455,f>>>=28;f&&(e[g]=f);return e}function G(a,b){var c=a.length,d=b.length;if(d>c)return[];if(d===c){if(b[d-1]>a[d-1])return[];if(1===d)return[a[0]-b[0]]}var e=[],f=0,g;for(g=0;g<d;g++)f+=a[g]-b[g],e[g]=f&268435455,f>>=28;for(;g<c;g++)f+=a[g],e[g]=f&268435455,f>>=28;return f?[]:Ca(e)}function yb(a,b,c,d,e){var f=c&16383;c>>=14;var g=d&16383;d>>=14;var k=c*g+d*f;e=f*g+((k&16383)<<14)+a[b]+e;a[b]=e&268435455;return c*d+(k>>14)+(e>>28)}function Z(a,b){var c=a.length,d=b.length,e=Ba(c+d-
1),f,g,k;for(g=0;g<d;g++){for(k=f=0;k<c;k++)f=yb(e,g+k,a[k],b[g],f);e[g+c]=f}return Ca(e)}function Da(a,b,c){for(var d=0;0<=b&&0<c--;)d=268435456*d+a[b--];return d}function Dc(a,b){var c=a.length-1,d=b.length-1,e=c-d,f,g;if(c<d||c===d&&(a[c]<b[c]||0<c&&a[c]===b[c]&&a[c-1]<b[c-1]))return S.q=[0],S.mod=a,S;if(c===d&&4>Da(a,d,2)/Da(b,d,2)){a=a.concat();for(d=0;;){g=G(a,b);if(0===g.length)break;a=g;d++}S.q=[d];S.mod=a;return S}g=Math.floor(Math.log(b[d])/Fd)+1;var k=28-g;a=a.concat();f=b.concat();if(k){for(b=
d;0<b;b--)f[b]=f[b]<<k&268435455|f[b-1]>>g;f[0]=f[0]<<k&268435455;a[c]&268435455<<g&268435455&&(a[++c]=0,e++);for(b=c;0<b;b--)a[b]=a[b]<<k&268435455|a[b-1]>>g;a[0]=a[0]<<k&268435455}for(var l,p=Ba(e+1),h=Ba(e).concat(f);;){l=G(a,h);if(0===l.length)break;p[e]++;a=l}e=f[d];f=Da(f,d,2);for(b=c;b>d;b--){c=b-d-1;p[c]=b>=a.length?1:a[b]===e?268435455:Math.floor(Da(a,b,2)/e);for(l=Da(a,b,3);p[c]*f>l;)p[c]--;h=h.slice(1);l=G(a,Z([p[c]],h));0===l.length&&(p[c]--,l=G(a,Z([p[c]],h)));a=l}if(k){for(b=0;b<a.length-
1;b++)a[b]=a[b]>>k|a[b+1]<<g&268435455;a[a.length-1]>>=k}S.q=Ca(p);S.mod=Ca(a);return S}function sa(a,b){if(1===b.length){if(1===a.length)return[a[0]%b[0]];if(16383>b[0]){b=b[0];for(var c=0,d,e=a.length-1;0<=e;e--)d=a[e],c=((d>>14)+(c<<14))%b,c=((d&16383)+(c<<14))%b;return[c]}}return Dc(a,b).mod}function Ea(a,b,c){var d=a.length-(b.length<<1);if(0<d)return Ea(a.slice(0,d).concat(Ea(a.slice(d),b,c)),b,c);var d=b.length+1,e=Z(a.slice(b.length-1),c).slice(d),f=a.slice(0,d),e=Z(e,b).slice(0,d);a=G(f,
e);0===a.length&&(f[d]=1,a=G(f,e));for(f=0;;f++){d=G(a,b);if(0===d.length)break;a=d;if(3<=f)return Ea(a,b,c)}return a}function Ec(a,b,c){var d=a.concat(),e=b.length-1,f=2*c.length,g=Ba(f+1);g[f]=1;var g=Dc(g,c).q,f=b[e],k=1,l;0!==(l=f>>>16)&&(f=l,k+=16);0!==(l=f>>8)&&(f=l,k+=8);0!==(l=f>>4)&&(f=l,k+=4);0!==(l=f>>2)&&(f=l,k+=2);0!==f>>1&&(k+=1);for(f=k-2;0<=e;e--){for(;0<=f;--f){k=d.length;l=Ba(2*k);var p,h,n;for(h=0;h<k;h++){p=yb(l,2*h,d[h],d[h],0);for(n=h+1;n<k;n++)p=yb(l,h+n,2*d[n],d[h],p);l[h+
k]=p}d=Ca(l);d=Ea(d,c,g);b[e]&1<<f&&(d=Ea(Z(d,a),c,g))}f=27}return d}function Fc(a){var b=1,c=[0],d=0,e=256,f=a.length,g=void 0;if(2>f)return 0;var k=8*(f-2),l=256*a.charCodeAt(0)+a.charCodeAt(1);if(l>k||l<k-8)return 0;for(l=0;l<k;l++)255<(e<<=1)&&(e=1,g=a.charCodeAt(--f)),268435455<b&&(b=1,c[++d]=0),g&e&&(c[d]|=b),b<<=1;return c}function t(a,b){if(!a)throw Error("No options given");var c=a.onResponse;a="string"===typeof a?{uri:a}:JSON.parse(JSON.stringify(a));a.onResponse=c;a.verbose&&(t.log=Gd());
a.url&&(a.uri=a.url,delete a.url);if(!a.uri&&""!==a.uri)throw Error("options.uri is a required argument");if("string"!==typeof a.uri)throw Error("options.uri must be a string");for(var c=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],d=0;d<c.length;d++)if(a[c[d]])throw Error("options."+c[d]+" is not supported");a.callback=b||I;a.method=a.method||"GET";a.headers=a.headers||{};a.body=a.body||null;a.timeout=a.timeout||t.DEFAULT_TIMEOUT;if(a.headers.host)throw Error("Options.headers.host is not supported");
a.json&&(a.headers.accept=a.headers.accept||"application/json","GET"!==a.method&&(a.headers["content-type"]="application/json"),"boolean"!==typeof a.json?a.body=JSON.stringify(a.json):"string"!==typeof a.body&&(a.body=JSON.stringify(a.body)));c=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(a[c]));return b.join("\x26")};a.qs&&(d="string"===typeof a.qs?a.qs:c(a.qs),-1!==a.uri.indexOf("?")?a.uri=a.uri+"\x26"+d:a.uri=a.uri+"?"+d);d=function(a){var b=
{};b.boundry="-------------------------------"+Math.floor(1E9*Math.random());var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push("--"+b.boundry+'\nContent-Disposition: form-data; name\x3d"'+d+'"\n\n'+a[d]+"\n");c.push("--"+b.boundry+"--");b.body=c.join("");b.length=b.body.length;b.type="multipart/form-data; boundary\x3d"+b.boundry;return b};if(a.form){if("string"===typeof a.form)throw Error("form name unsupported");if("POST"===a.method){var e=(a.encoding||"application/x-www-form-urlencoded").toLowerCase();
a.headers["content-type"]=e;switch(e){case "application/x-www-form-urlencoded":a.body=c(a.form).replace(/%20/g,"+");break;case "multipart/form-data":c=d(a.form);a.body=c.body;a.headers["content-type"]=c.type;break;default:throw Error("unsupported encoding:"+e);}}}a.onResponse=a.onResponse||I;!0===a.onResponse&&(a.onResponse=b,a.callback=I);!a.headers.authorization&&a.auth&&(a.headers.authorization="Basic "+h.from(a.auth.username+":"+a.auth.password,"utf-8").toString("base64"));return"function"!==
typeof fetch||"function"!==typeof ReadableStream&&aa.XMLHttpRequest?Hd(a):Id(a)}function Hd(a){function b(){if(!l.response){l.response=!0;t.log.debug("Got response",{id:d.id,status:d.status});clearTimeout(d.timeoutTimer);d.statusCode=d.status;if(e&&0===d.statusCode){var b=Error("CORS request rejected: "+a.uri);b.cors="rejected";l.loading=!0;l.end=!0;p.emit("error",b);return a.callback(b,d)}a.onResponse(null,d)}}function c(){if(d.response){var a=d.responseText.substr(g);g+=a.length;0<a.length&&p.push(h.from(a,
"ascii"))}l.loading||(l.loading=!0,t.log.debug("Response body loading",{id:d.id}))}var d=new aa.XMLHttpRequest,e=Jd(a.uri),f=!1,g=0;ga+=1;d.seq_id=ga;d.id=ga+": "+a.method+" "+a.uri;d._id=d.id;if(e&&!("withCredentials"in d)){var k=Error("Browser does not support cross-origin request: "+a.uri);k.cors="unsupported";return a.callback(k,d)}d.timeoutTimer=setTimeout(function(){f=!0;var b=Error("ETIMEDOUT");b.code="ETIMEDOUT";b.duration=a.timeout;t.log.error("Timeout",{id:d._id,milliseconds:a.timeout});
return a.callback(b,d)},a.timeout);var l={response:!1,loading:!1,end:!1};d.overrideMimeType("text/plain; charset\x3dx-user-defined");d.onreadystatechange=function(e){if(f)return t.log.debug("Ignoring timed out state change",{state:d.readyState,id:d.id});t.log.debug("State change",{state:d.readyState,id:d.id,timedOut:f});if(d.readyState===aa.XMLHttpRequest.OPENED){t.log.debug("Request started",{id:d.id});for(var g in a.headers)d.setRequestHeader(g,a.headers[g])}else if(d.readyState===aa.XMLHttpRequest.HEADERS_RECEIVED)b();
else if(d.readyState===aa.XMLHttpRequest.LOADING)b(),c();else if(d.readyState===aa.XMLHttpRequest.DONE)a:if(b(),c(),!l.end){l.end=!0;t.log.debug("Request done",{id:d.id});p.push(null);d.body=d.responseText;if(a.json)try{d.body=JSON.parse(d.responseText)}catch(m){p.emit("error",m);a.callback(m,d);break a}a.callback(null,d,d.body)}};d.open(a.method,a.uri,!0);e&&(d.withCredentials=!!a.withCredentials);d.send(a.body);var p=new A.Readable;p._read=I;return p}function Id(a){var b={};ga+=1;b.seq_id=ga;b.id=
ga+": "+a.method+" "+a.uri;b._id=b.id;ga+=1;var c={};a.headers&&(c.headers=a.headers);a.method&&(c.method=a.method);a.body&&(c.body=a.body);var d=new A.Readable;d._read=I;aa.fetch(a.uri||a.url,c).then(function(c){function e(){g.read().then(function(a){a.done?d.push(null):(d.push(h.from(a.value)),e())})}b.statusCode=b.status=c.status;d.emit("response",{statusCode:c.status,statusMessage:c.statusText,headers:Array.from(c.headers).reduce(function(a,b){b=Kd(b,2);a[b[0]]=b[1];return a},{})});a.callback&&
c.clone()[a.json?"json":"text"]().then(function(c){return a.callback(null,b,c)}).catch(function(b){return a.callback(b)});var g=c.body.getReader();e()},function(b){d.emit("error",b);a.callback(b)});return d}function I(){}function Gd(){var a={},b=["trace","debug","info","warn","error"],c,d;for(d=0;d<b.length;d++)c=b[d],a[c]=I,"undefined"!==typeof console&&console&&console[c]&&(a[c]=Ld(console,c));return a}function Ld(a,b){return function(c,d){"object"===("undefined"===typeof d?"undefined":zb(d))&&
(c+=" "+JSON.stringify(d));return a[b](c)}}function Jd(a){var b=/^([\w+.-]+:)(?:\/\/([^/?#:]*)(?::(\d+))?)?/,c=void 0;try{c=aa.location.href}catch(d){c=document.createElement("a"),c.href="",c=c.href}c=b.exec(c.toLowerCase())||[];a=b.exec(a.toLowerCase());return!(!a||a[1]===c[1]&&a[2]===c[2]&&(a[3]||("http:"===a[1]?80:443))===(c[3]||("http:"===c[1]?80:443)))}function Fa(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}}
function Ab(a,b,c,d){b=b||"\x26";c=c||"\x3d";null===a&&(a=void 0);return"object"===typeof a?Gc(Md(a),function(d){var e=encodeURIComponent(Fa(d))+c;return Hc(a[d])?Gc(a[d],function(a){return e+encodeURIComponent(Fa(a))}).join(b):e+encodeURIComponent(Fa(a[d]))}).join(b):d?encodeURIComponent(Fa(d))+c+encodeURIComponent(Fa(a)):""}function Gc(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}function bb(a,b,c,d){c=c||"\x3d";var e={};if("string"!==typeof a||0===a.length)return e;
var f=/\+/g;a=a.split(b||"\x26");b=1E3;d&&"number"===typeof d.maxKeys&&(b=d.maxKeys);d=a.length;0<b&&d>b&&(d=b);for(b=0;b<d;++b){var g=a[b].replace(f,"%20"),k=g.indexOf(c),l;0<=k?(l=g.substr(0,k),g=g.substr(k+1)):(l=g,g="");l=decodeURIComponent(l);g=decodeURIComponent(g);Object.prototype.hasOwnProperty.call(e,l)?Hc(e[l])?e[l].push(g):e[l]=[e[l],g]:e[l]=g}return e}function Nd(a,b){var c=a.split("@"),d="";1<c.length&&(d=c[0]+"@",a=c[1]);a=a.replace(Od,".");a=a.split(".");for(var c=a.length,e=[];c--;)e[c]=
b(a[c]);b=e.join(".");return d+b}function Ic(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function Pd(a){return Nd(a,function(a){var b;if(Qd.test(a)){var d,e,f,g,k,l,p,h,n;b=[];var m,v,y;d=[];f=0;for(g=a.length;f<g;)l=a.charCodeAt(f++),55296<=l&&56319>=l&&f<g?(m=a.charCodeAt(f++),56320==(m&64512)?d.push(((l&1023)<<10)+(m&1023)+65536):(d.push(l),f--)):d.push(l);a=d;m=a.length;d=128;e=0;k=72;for(l=0;l<m;++l)n=a[l],128>n&&b.push(Bb(n));for((f=g=b.length)&&b.push("-");f<m;){p=2147483647;for(l=0;l<m;++l)n=a[l],
n>=d&&n<p&&(p=n);v=f+1;if(p-d>ta((2147483647-e)/v))throw new RangeError(Jc.overflow);e+=(p-d)*v;d=p;for(l=0;l<m;++l){n=a[l];if(n<d&&2147483647<++e)throw new RangeError(Jc.overflow);if(n==d){h=e;for(p=36;;p+=36){n=p<=k?1:p>=k+26?26:p-k;if(h<n)break;y=h-n;h=36-n;b.push(Bb(Ic(n+y%h,0)));h=ta(y/h)}b.push(Bb(Ic(h,0)));k=v;p=0;e=f==g?ta(e/700):e>>1;for(e+=ta(e/k);455<e;p+=36)e=ta(e/35);k=ta(p+36*e/(e+38));e=0;++f}}++e;++d}b="xn--"+b.join("")}else b=a;return b})}function T(){this.href=this.path=this.pathname=
this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function Kc(a,b,c){if(a&&X(a)&&a instanceof T)return a;var d=new T;d.parse(a,b,c);return d}function Lc(a){var b=a.auth||"";b&&(b=encodeURIComponent(b),b=b.replace(/%3A/i,":"),b+="@");var c=a.protocol||"",d=a.pathname||"",e=a.hash||"",f=!1,g="";a.host?f=b+a.host:a.hostname&&(f=b+(-1===a.hostname.indexOf(":")?a.hostname:"["+this.hostname+"]"),a.port&&(f+=":"+a.port));a.query&&X(a.query)&&Object.keys(a.query).length&&
(g=Ab(a.query));b=a.search||g&&"?"+g||"";c&&":"!==c.substr(-1)&&(c+=":");a.slashes||(!c||ua[c])&&!1!==f?(f="//"+(f||""),d&&"/"!==d.charAt(0)&&(d="/"+d)):f||(f="");e&&"#"!==e.charAt(0)&&(e="#"+e);b&&"?"!==b.charAt(0)&&(b="?"+b);d=d.replace(/[?#]/g,function(a){return encodeURIComponent(a)});b=b.replace("#","%23");return c+f+d+b+e}function Mc(a){var b=a.host,c=Rd.exec(b);c&&(c=c[0],":"!==c&&(a.port=c.substr(1)),b=b.substr(0,b.length-c.length));b&&(a.hostname=b)}function cb(a,b,c){var d=a.shareKeys;Array.isArray(b)||
(b=Nc(b));c||(c=b.map(function(a){return Ga(d,a)}).reduce(function(a,b){return a.concat(b)}).filter(function(a,b,c){return b===c.indexOf(a)}));a=[c,b.map(function(a){return a.nodeId}),[]];for(var e=c.length;e--;)for(var f=new Y(d[c[e]]),g=b.length;g--;){var k=h.from(b[g].key);!k||32!==k.length&&16!==k.length||a[2].push(e,g,C(f.encryptECB(k)))}return a}function Nc(a){return[a].concat((a.children||[]).map(Nc).reduce(function(a,c){return a.concat(c)},[]))}function Ga(a,b){var c=b.nodeId;b=b.parent;var d=
[];a[c]&&d.push(c);return b?d.concat(Ga(a,b)):d}function va(a,b){return new ha(a,b)}var Ib="undefined"!==typeof window?window:"undefined"!==typeof global?global:this,oa="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},K=[],E=[],bd="undefined"!==typeof Uint8Array?Uint8Array:Array,gb=!1,Sd={}.toString,Ob=Array.isArray||function(a){return"[object Array]"==Sd.call(a)};h.TYPED_ARRAY_SUPPORT=void 0!==oa.TYPED_ARRAY_SUPPORT?oa.TYPED_ARRAY_SUPPORT:!0;
h.poolSize=8192;h._augment=function(a){a.__proto__=h.prototype;return a};h.from=function(a,b,c){return Lb(null,a,b,c)};h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array);h.alloc=function(a,b,c){Nb(a);a=0>=a?O(null,a):void 0!==b?"string"===typeof c?O(null,a).fill(b,c):O(null,a).fill(b):O(null,a);return a};h.allocUnsafe=function(a){return hb(null,a)};h.allocUnsafeSlow=function(a){return hb(null,a)};h.isBuffer=Ta;h.compare=function(a,b){if(!L(a)||!L(b))throw new TypeError("Arguments must be Buffers");
if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};h.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};h.concat=function(a,b){if(!Ob(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);
var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=h.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!L(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};h.byteLength=Mb;h.prototype._isBuffer=!0;h.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)ba(this,b,b+1);return this};h.prototype.swap32=function(){var a=this.length;if(0!==
a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)ba(this,b,b+3),ba(this,b+1,b+2);return this};h.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)ba(this,b,b+7),ba(this,b+1,b+6),ba(this,b+2,b+5),ba(this,b+3,b+4);return this};h.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?Qb(this,0,a):$c.apply(this,arguments)};h.prototype.equals=
function(a){if(!L(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===h.compare(this,a)};h.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"\x3cBuffer "+a+"\x3e"};h.prototype.compare=function(a,b,c,d,e){if(!L(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");
if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,k=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<k;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};h.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};h.prototype.indexOf=function(a,b,c){return Rb(this,a,b,c,!0)};h.prototype.lastIndexOf=function(a,b,c){return Rb(this,a,b,c,!1)};h.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",
c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&
(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return xa(Qa(a,this.length-b),this,b,c);case "ascii":return xa(Xb(a),this,b,c);case "latin1":case "binary":return xa(Xb(a),this,b,c);case "base64":return xa(Pb(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var f;d=a;for(var e=this.length-b,g=[],k=0;k<d.length&&!(0>
(e-=2));++k)f=d.charCodeAt(k),a=f>>8,f%=256,g.push(f),g.push(a);return xa(g,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Tb=4096;h.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(h.TYPED_ARRAY_SUPPORT)b=this.subarray(a,b),b.__proto__=h.prototype;
else{c=b-a;b=new h(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};h.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||x(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};h.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||x(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};h.prototype.readUInt8=function(a,b){b||x(a,1,this.length);return this[a]};h.prototype.readUInt16LE=function(a,b){b||x(a,2,this.length);return this[a]|
this[a+1]<<8};h.prototype.readUInt16BE=function(a,b){b||x(a,2,this.length);return this[a]<<8|this[a+1]};h.prototype.readUInt32LE=function(a,b){b||x(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};h.prototype.readUInt32BE=function(a,b){b||x(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};h.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||x(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,
8*b));return c};h.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||x(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};h.prototype.readInt8=function(a,b){b||x(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};h.prototype.readInt16LE=function(a,b){b||x(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};h.prototype.readInt16BE=function(a,b){b||x(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?
a|4294901760:a};h.prototype.readInt32LE=function(a,b){b||x(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};h.prototype.readInt32BE=function(a,b){b||x(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};h.prototype.readFloatLE=function(a,b){b||x(a,4,this.length);return Pa(this,a,!0,23,4)};h.prototype.readFloatBE=function(a,b){b||x(a,4,this.length);return Pa(this,a,!1,23,4)};h.prototype.readDoubleLE=function(a,b){b||x(a,8,this.length);return Pa(this,a,
!0,52,8)};h.prototype.readDoubleBE=function(a,b){b||x(a,8,this.length);return Pa(this,a,!1,52,8)};h.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||D(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};h.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||D(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};h.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||D(this,
a,b,1,255,0);h.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};h.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):Ra(this,a,b,!0);return b+2};h.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Ra(this,a,b,!1);return b+2};h.prototype.writeUInt32LE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?
(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):Sa(this,a,b,!0);return b+4};h.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):Sa(this,a,b,!1);return b+4};h.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),D(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+
c};h.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),D(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};h.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||D(this,a,b,1,127,-128);h.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};h.prototype.writeInt16LE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[b]=a&255,
this[b+1]=a>>>8):Ra(this,a,b,!0);return b+2};h.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Ra(this,a,b,!1);return b+2};h.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,4,2147483647,-2147483648);h.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):Sa(this,a,b,!0);return b+4};h.prototype.writeInt32BE=function(a,b,c){a=+a;b|=0;c||D(this,a,b,4,2147483647,-2147483648);
0>a&&(a=4294967295+a+1);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):Sa(this,a,b,!1);return b+4};h.prototype.writeFloatLE=function(a,b,c){return Vb(this,a,b,!0,c)};h.prototype.writeFloatBE=function(a,b,c){return Vb(this,a,b,!1,c)};h.prototype.writeDoubleLE=function(a,b,c){return Wb(this,a,b,!0,c)};h.prototype.writeDoubleBE=function(a,b,c){return Wb(this,a,b,!1,c)};h.prototype.copy=function(a,b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);
b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!h.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,
c+e),b);return e};h.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!h.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=
b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=L(a)?a:Qa((new h(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var ad=/[^+\/0-9A-Za-z-_]/g,U=Zb,V=$b;"function"===typeof oa.setTimeout&&(U=setTimeout);"function"===typeof oa.clearTimeout&&(V=clearTimeout);var P=[],ma=!1,ca,Ua=-1;cc.prototype.run=function(){this.fun.apply(null,this.array)};var wa=oa.performance||{},Td=wa.now||wa.mozNow||wa.msNow||wa.oNow||
wa.webkitNow||function(){return(new Date).getTime()},Ud=new Date,pa={nextTick:z,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:da,addListener:da,once:da,off:da,removeListener:da,removeAllListeners:da,emit:da,binding:function(a){throw Error("process.binding is not supported");},cwd:function(){return"/"},chdir:function(a){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(a){var b=.001*Td.call(wa),c=Math.floor(b),b=Math.floor(b%1*1E9);a&&
(c-=a[0],b-=a[1],0>b&&(c--,b+=1E9));return[c,b]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ud)/1E3}};W.prototype=Object.create(null);q.EventEmitter=q;q.usingDomains=!1;q.prototype.domain=void 0;q.prototype._events=void 0;q.prototype._maxListeners=void 0;q.defaultMaxListeners=10;q.init=function(){this.domain=null;!q.usingDomains||!(void 0).active||this instanceof(void 0).Domain||(this.domain=(void 0).active);this._events&&this._events!==Object.getPrototypeOf(this)._events||
(this._events=new W,this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};q.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');this._maxListeners=a;return this};q.prototype.getMaxListeners=function(){return void 0===this._maxListeners?q.defaultMaxListeners:this._maxListeners};q.prototype.emit=function(a){var b,c,d,e,f;e="error"===a;if(b=this._events)e=e&&null==b.error;else if(!e)return!1;c=this.domain;
if(e){b=arguments[1];if(c)b||(b=Error('Uncaught, unspecified "error" event')),b.domainEmitter=this,b.domain=c,b.domainThrown=!1,c.emit("error",b);else{if(b instanceof Error)throw b;c=Error('Uncaught, unspecified "error" event. ('+b+")");c.context=b;throw c;}return!1}c=b[a];if(!c)return!1;b="function"===typeof c;d=arguments.length;switch(d){case 1:if(b)c.call(this);else for(b=c.length,c=ya(c,b),e=0;e<b;++e)c[e].call(this);break;case 2:e=arguments[1];if(b)c.call(this,e);else for(b=c.length,c=ya(c,b),
d=0;d<b;++d)c[d].call(this,e);break;case 3:e=arguments[1];d=arguments[2];if(b)c.call(this,e,d);else for(b=c.length,c=ya(c,b),f=0;f<b;++f)c[f].call(this,e,d);break;case 4:e=arguments[1];d=arguments[2];f=arguments[3];if(b)c.call(this,e,d,f);else{b=c.length;c=ya(c,b);for(var g=0;g<b;++g)c[g].call(this,e,d,f)}break;default:e=Array(d-1);for(f=1;f<d;f++)e[f-1]=arguments[f];if(b)c.apply(this,e);else for(b=c.length,c=ya(c,b),d=0;d<b;++d)c[d].apply(this,e)}return!0};q.prototype.addListener=function(a,b){return dc(this,
a,b,!1)};q.prototype.on=q.prototype.addListener;q.prototype.prependListener=function(a,b){return dc(this,a,b,!0)};q.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,ec(this,a,b));return this};q.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.prependListener(a,ec(this,a,b));return this};q.prototype.removeListener=function(a,b){var c,d,
e,f,g;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');d=this._events;if(!d)return this;c=d[a];if(!c)return this;if(c===b||c.listener&&c.listener===b)0===--this._eventsCount?this._events=new W:(delete d[a],d.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!==typeof c){e=-1;for(f=c.length;0<f--;)if(c[f]===b||c[f].listener&&c[f].listener===b){g=c[f].listener;e=f;break}if(0>e)return this;if(1===c.length){c[0]=void 0;if(0===--this._eventsCount)return this._events=
new W,this;delete d[a]}else{f=e+1;for(var k=c.length;f<k;e+=1,f+=1)c[e]=c[f];c.pop()}d.removeListener&&this.emit("removeListener",a,g||b)}return this};q.prototype.removeAllListeners=function(a){var b;b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=new W,this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=new W:delete b[a]),this;if(0===arguments.length){b=Object.keys(b);for(var c=0,d;c<b.length;++c)d=b[c],"removeListener"!==d&&this.removeAllListeners(d);
this.removeAllListeners("removeListener");this._events=new W;this._eventsCount=0;return this}b=b[a];if("function"===typeof b)this.removeListener(a,b);else if(b){do this.removeListener(a,b[b.length-1]);while(b[0])}return this};q.prototype.listeners=function(a){var b=this._events;if(b)if(a=b[a])if("function"===typeof a)a=[a.listener||a];else{for(var b=Array(a.length),c=0;c<b.length;++c)b[c]=a[c].listener||a[c];a=b}else a=[];else a=[];return a};q.listenerCount=function(a,b){return"function"===typeof a.listenerCount?
a.listenerCount(b):fc.call(a,b)};q.prototype.listenerCount=fc;q.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var ia="function"===typeof Object.create?function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},ed=/%[sdj%]/g,Va={},mb;Q.colors={bold:[1,22],italic:[3,23],
underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Q.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};var md="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Cb={inherits:ia,_extend:hc,log:function(){console.log("%s - %s",ld(),kb.apply(null,arguments))},isBuffer:function(a){return Ta(a)},isPrimitive:function(a){return null===
a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a},isFunction:Xa,isError:Ya,isDate:pb,isObject:X,isRegExp:Za,isUndefined:R,isSymbol:function(a){return"symbol"===typeof a},isString:na,isNumber:jc,isNullOrUndefined:function(a){return null==a},isNull:function(a){return null===a},isBoolean:nb,isArray:ic,inspect:Q,deprecate:lb,format:kb,debuglog:gc};ea.prototype.push=function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;
this.tail=a;++this.length};ea.prototype.unshift=function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length};ea.prototype.shift=function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}};ea.prototype.clear=function(){this.head=this.tail=null;this.length=0};ea.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c};ea.prototype.concat=
function(a){if(0===this.length)return h.alloc(0);if(1===this.length)return this.head.data;a=h.allocUnsafe(a>>>0);for(var b=this.head,c=0;b;)b.data.copy(a,c),c+=b.data.length,b=b.next;return a};var nd=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};za.prototype.write=function(a){for(var b="";this.charLength;){b=a.length>=this.charLength-
this.charReceived?this.charLength-this.charReceived:a.length;a.copy(this.charBuffer,this.charReceived,0,b);this.charReceived+=b;if(this.charReceived<this.charLength)return"";a=a.slice(b,a.length);var b=this.charBuffer.slice(0,this.charLength).toString(this.encoding),c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)this.charLength+=this.surrogateSize,b="";else{this.charReceived=this.charLength=0;if(0===a.length)return b;break}}this.detectIncompleteChar(a);var d=a.length;this.charLength&&(a.copy(this.charBuffer,
0,a.length-this.charReceived,d),d-=this.charReceived);b+=a.toString(this.encoding,0,d);d=b.length-1;c=b.charCodeAt(d);return 55296<=c&&56319>=c?(c=this.surrogateSize,this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),a.copy(this.charBuffer,0,0,c),b.substring(0,d)):b};za.prototype.detectIncompleteChar=function(a){for(var b=3<=a.length?3:a.length;0<b;b--){var c=a[a.length-b];if(1==b&&6==c>>5){this.charLength=2;break}if(2>=b&&14==c>>4){this.charLength=3;break}if(3>=b&&
30==c>>3){this.charLength=4;break}}this.charReceived=b};za.prototype.end=function(a){var b="";a&&a.length&&(b=this.write(a));this.charReceived&&(a=this.encoding,b+=this.charBuffer.slice(0,this.charReceived).toString(a));return b};u.ReadableState=kc;var r=gc("stream");ia(u,q);u.prototype.push=function(a,b){var c=this._readableState;c.objectMode||"string"!==typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=h.from(a,b),b=""));return lc(this,c,a,b,!1)};u.prototype.unshift=function(a){return lc(this,
this._readableState,a,"",!0)};u.prototype.isPaused=function(){return!1===this._readableState.flowing};u.prototype.setEncoding=function(a){this._readableState.decoder=new za(a);this._readableState.encoding=a;return this};u.prototype.read=function(a){r("read",a);a=parseInt(a,10);var b=this._readableState,c=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return r("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?tb(this):$a(this),null;a=mc(a,
b);if(0===a&&b.ended)return 0===b.length&&tb(this),null;var d=b.needReadable;r("need readable",d);if(0===b.length||b.length-a<b.highWaterMark)d=!0,r("length less than watermark",d);b.ended||b.reading?r("reading or ended",!1):d&&(r("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=mc(c,b)));d=0<a?oc(a,b):null;null===d?(b.needReadable=!0,a=0):b.length-=a;0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&tb(this));null!==
d&&this.emit("data",d);return d};u.prototype._read=function(a){this.emit("error",Error("not implemented"))};u.prototype.pipe=function(a,b){function c(a){r("onunpipe");a===w&&e()}function d(){r("onend");a.end()}function e(){r("cleanup");a.removeListener("close",k);a.removeListener("finish",l);a.removeListener("drain",m);a.removeListener("error",g);a.removeListener("unpipe",c);w.removeListener("end",d);w.removeListener("end",e);w.removeListener("data",f);v=!0;!n.awaitDrain||a._writableState&&!a._writableState.needDrain||
m()}function f(b){r("ondata");y=!1;!1!==a.write(b)||y||((1===n.pipesCount&&n.pipes===a||1<n.pipesCount&&-1!==pc(n.pipes,a))&&!v&&(r("false write response, pause",w._readableState.awaitDrain),w._readableState.awaitDrain++,y=!0),w.pause())}function g(b){r("onerror",b);h();a.removeListener("error",g);0===a.listeners("error").length&&a.emit("error",b)}function k(){a.removeListener("finish",l);h()}function l(){r("onfinish");a.removeListener("close",k);h()}function h(){r("unpipe");w.unpipe(a)}var w=this,
n=this._readableState;switch(n.pipesCount){case 0:n.pipes=a;break;case 1:n.pipes=[n.pipes,a];break;default:n.pipes.push(a)}n.pipesCount+=1;r("pipe count\x3d%d opts\x3d%j",n.pipesCount,b);b=b&&!1===b.end?e:d;if(n.endEmitted)z(b);else w.once("end",b);a.on("unpipe",c);var m=td(w);a.on("drain",m);var v=!1,y=!1;w.on("data",f);rd(a,"error",g);a.once("close",k);a.once("finish",l);a.emit("pipe",w);n.flowing||(r("pipe resume"),w.resume());return a};u.prototype.unpipe=function(a){var b=this._readableState;
if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this);return this}if(!a){a=b.pipes;var c=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<c;b++)a[b].emit("unpipe",this);return this}c=pc(b.pipes,a);if(-1===c)return this;b.pipes.splice(c,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this);return this};u.prototype.on=function(a,b){b=q.prototype.on.call(this,
a,b);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&$a(this,a):z(ud,this)));return b};u.prototype.addListener=u.prototype.on;u.prototype.resume=function(){var a=this._readableState;a.flowing||(r("resume"),a.flowing=!0,a.resumeScheduled||(a.resumeScheduled=!0,z(vd,this,a)));return this};u.prototype.pause=function(){r("call pause flowing\x3d%j",
this._readableState.flowing);!1!==this._readableState.flowing&&(r("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};u.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){r("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)});a.on("data",function(e){r("wrapped data");b.decoder&&(e=b.decoder.write(e));b.objectMode&&(null===e||void 0===e)||!(b.objectMode||e&&e.length)||d.push(e)||(c=!0,a.pause())});
for(var e in a)void 0===this[e]&&"function"===typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));xd(["error","close","destroy","pause","resume"],function(b){a.on(b,d.emit.bind(d,b))});d._read=function(b){r("wrapped _read",b);c&&(c=!1,a.resume())};return d};u._fromList=oc;B.WritableState=ub;ia(B,q);ub.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};B.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};
B.prototype.write=function(a,b,c){var d=this._writableState,e=!1;"function"===typeof b&&(c=b,b=null);h.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding);"function"!==typeof c&&(c=yd);if(d.ended)d=c,a=Error("write after end"),this.emit("error",a),z(d,a);else{var f=c,g=!0,k=!1;null===a?k=new TypeError("May not write null values to stream"):h.isBuffer(a)||"string"===typeof a||void 0===a||d.objectMode||(k=new TypeError("Invalid non-string/buffer chunk"));k&&(this.emit("error",k),z(f,k),g=!1);g&&(d.pendingcb++,
e=b,d.objectMode||!1===d.decodeStrings||"string"!==typeof a||(a=h.from(a,e)),h.isBuffer(a)&&(e="buffer"),f=d.objectMode?1:a.length,d.length+=f,b=d.length<d.highWaterMark,b||(d.needDrain=!0),d.writing||d.corked?(f=d.lastBufferedRequest,d.lastBufferedRequest=new zd(a,e,c),f?f.next=d.lastBufferedRequest:d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1):vb(this,d,!1,f,a,e,c),e=b)}return e};B.prototype.cork=function(){this._writableState.corked++};B.prototype.uncork=function(){var a=this._writableState;
a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||rc(this,a))};B.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};B.prototype._write=function(a,b,c){c(Error("not implemented"))};B.prototype._writev=null;B.prototype.end=
function(a,b,c){var d=this._writableState;"function"===typeof a?(c=a,b=a=null):"function"===typeof b&&(c=b,b=null);null!==a&&void 0!==a&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending&&!d.finished){a=c;d.ending=!0;uc(this,d);if(a)if(d.finished)z(a);else this.once("finish",a);d.ended=!0;this.writable=!1}};ia(F,u);for(var Oc=Object.keys(B.prototype),Db=0;Db<Oc.length;Db++){var Eb=Oc[Db];F.prototype[Eb]||(F.prototype[Eb]=B.prototype[Eb])}ia(M,F);M.prototype.push=function(a,b){this._transformState.needTransform=
!1;return F.prototype.push.call(this,a,b)};M.prototype._transform=function(a,b,c){throw Error("Not implemented");};M.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;d.transforming||(a=this._readableState,(d.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};M.prototype._read=function(a){a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,
a.writeencoding,a.afterTransform)):a.needTransform=!0};ia(qa,M);qa.prototype._transform=function(a,b,c){c(null,a)};ia(A,q);A.Readable=u;A.Writable=B;A.Duplex=F;A.Transform=M;A.PassThrough=qa;A.Stream=A;A.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&l.pause&&l.pause()}function d(){l.readable&&l.resume&&l.resume()}function e(){h||(h=!0,a.end())}function f(){h||(h=!0,"function"===typeof a.destroy&&a.destroy())}function g(a){k();if(0===q.listenerCount(this,"error"))throw a;
}function k(){l.removeListener("data",c);a.removeListener("drain",d);l.removeListener("end",e);l.removeListener("close",f);l.removeListener("error",g);a.removeListener("error",g);l.removeListener("end",k);l.removeListener("close",k);a.removeListener("close",k)}var l=this;l.on("data",c);a.on("drain",d);a._isStdio||b&&!1===b.end||(l.on("end",e),l.on("close",f));var h=!1;l.on("error",g);a.on("error",g);l.on("end",k);l.on("close",k);a.on("close",k);a.emit("pipe",l);return a};var Ha=J(function(a,b){function c(a,
b,c){function e(){for(;h.length&&!m.paused;){var a=h.shift();if(null===a)return m.emit("end");m.emit("data",a)}}a=a||function(a){this.queue(a)};b=b||function(){this.queue(null)};var f=!1,g=!1,h=[],n=!1,m=new d;m.readable=m.writable=!0;m.paused=!1;m.autoDestroy=!(c&&!1===c.autoDestroy);m.write=function(b){a.call(this,b);return!m.paused};m.queue=m.push=function(a){if(n)return m;null===a&&(n=!0);h.push(a);e();return m};m.on("end",function(){m.readable=!1;!m.writable&&m.autoDestroy&&z(function(){m.destroy()})});
m.end=function(a){if(!f)return f=!0,arguments.length&&m.write(a),m.writable=!1,b.call(m),!m.readable&&m.autoDestroy&&m.destroy(),m};m.destroy=function(){if(!g)return f=g=!0,h.length=0,m.writable=m.readable=!1,m.emit("close"),m};m.pause=function(){if(!m.paused)return m.paused=!0,m};m.resume=function(){m.paused&&(m.paused=!1,m.emit("resume"));e();m.paused||m.emit("drain");return m};return m}var d=A;a.exports=c;c.through=c}),fa=Ha&&"object"===typeof Ha&&"default"in Ha?Ha["default"]:Ha,Ia=J(function(a,
b){function c(a,b,c){function e(){for(;h.length&&!m.paused;){var a=h.shift();if(null===a)return m.emit("end");m.emit("data",a)}}a=a||function(a){this.queue(a)};b=b||function(){this.queue(null)};var f=!1,g=!1,h=[],n=!1,m=new d;m.readable=m.writable=!0;m.paused=!1;m.autoDestroy=!(c&&!1===c.autoDestroy);m.write=function(b){a.call(this,b);return!m.paused};m.queue=m.push=function(a){if(n)return m;null===a&&(n=!0);h.push(a);e();return m};m.on("end",function(){m.readable=!1;!m.writable&&m.autoDestroy&&z(function(){m.destroy()})});
m.end=function(a){if(!f)return f=!0,arguments.length&&m.write(a),m.writable=!1,b.call(m),!m.readable&&m.autoDestroy&&m.destroy(),m};m.destroy=function(){if(!g)return f=g=!0,h.length=0,m.writable=m.readable=!1,m.emit("close"),m};m.pause=function(){if(!m.paused)return m.paused=!0,m};m.resume=function(){m.paused&&(m.paused=!1,m.emit("resume"));e();m.paused||m.emit("drain");return m};return m}var d=A;a.exports=c;c.through=c}),Vd=Ia&&"object"===typeof Ia&&"default"in Ia?Ia["default"]:Ia,Ja=J(function(a){function b(a,
b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c)}var c=["write","end","destroy"],d=["resume","pause"],e=["data","close"],f=Array.prototype.slice;a.exports=function(a,k){function g(a){h.emit("error",a)}var h=new A,w=!1;b(c,function(b){h[b]=function(){return a[b].apply(a,arguments)}});b(d,function(a){h[a]=function(){h.emit(a);var b=k[a];if(b)return b.apply(k,arguments);k.emit(a)}});b(e,function(a){k.on(a,function(){var b=f.call(arguments);b.unshift(a);h.emit.apply(h,b)})});k.on("end",
function(){if(!w){w=!0;var a=f.call(arguments);a.unshift("end");h.emit.apply(h,a)}});a.on("drain",function(){h.emit("drain")});a.on("error",g);k.on("error",g);h.writable=a.writable;h.readable=k.readable;return h}}),Wd=Ja&&"object"===typeof Ja&&"default"in Ja?Ja["default"]:Ja,Ka=J(function(a){a.exports=function(){function a(b){2>b.length||(b[0].pipe(b[1]),a(b.slice(1)))}function c(){var a=[].slice.call(arguments);a.unshift("error");e.emit.apply(e,a)}var d;d=1==arguments.length&&Array.isArray(arguments[0])?
arguments[0]:[].slice.call(arguments);if(0==d.length)return Vd();if(1==d.length)return d[0];var e=Wd(d[0],d[d.length-1]);a(d);for(var f=1;f<d.length-1;f++)d[f].on("error",c);return e}}),Aa=Ka&&"object"===typeof Ka&&"default"in Ka?Ka["default"]:Ka,Xd={},La=J(function(a,b,c){!function(b){function c(a,b){b=b||{type:"Array"};if("undefined"!=typeof pa&&"number"==typeof pa.pid){a:{var c=b;b=Xd.randomBytes(a);switch(c.type){case "Array":a=[].slice.call(b);break a;case "Buffer":a=b;break a;case "Uint8Array":for(var c=
new Uint8Array(a),d=0;d<a;++d)c[d]=b.readUInt8(d);a=c;break a;default:throw Error(c.type+" is unsupported.");}}return a}if(!window.crypto&&!window.msCrypto)throw Error("Your browser does not support window.crypto.");a:switch(a=new Uint8Array(a),(window.crypto||window.msCrypto).getRandomValues(a),b.type){case "Array":a=[].slice.call(a);break a;case "Buffer":try{new h(1)}catch(p){throw Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.");}a=new h(a);break a;
case "Uint8Array":break a;default:throw Error(b.type+" is unsupported.");}return a}"undefined"!==typeof define&&define.amd?define([],function(){return c}):"undefined"!==typeof a&&a.exports?a.exports=c:b.secureRandom=c;c.randomArray=function(a){return c(a,{type:"Array"})};c.randomUint8Array=function(a){return c(a,{type:"Uint8Array"})};c.randomBuffer=function(a){return c(a,{type:"Buffer"})}}(Ib)}),ab=La&&"object"===typeof La&&"default"in La?La["default"]:La,zb="function"===typeof Symbol&&"symbol"===
typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ja=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},ka=function(){function a(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),
eb=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},fb=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b},Kd=function(){return function(a,
b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),k;!(d=(k=g.next()).done)&&(c.push(k.value),!b||c.length!==b);d=!0);}catch(l){e=!0,f=l}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),xb=function(){function a(b){ja(this,a);this._tables[0][0][0]||this._precompute();var c,d,e,f,g=this._tables[0][4],k=this._tables[1];
c=b.length;var l=1;if(4!==c&&6!==c&&8!==c)throw Error("invalid aes key size");this._key=[e=b.slice(0),f=[]];for(b=c;b<4*c+28;b++){d=e[b-1];if(0===b%c||8===c&&4===b%c)d=g[d>>>24]<<24^g[d>>16&255]<<16^g[d>>8&255]<<8^g[d&255],0===b%c&&(d=d<<8^d>>>24^l<<24,l=l<<1^283*(l>>7));e[b]=e[b-c]^d}for(c=0;b;c++,b--)d=e[c&3?b:b-4],f[c]=4>=b||4>c?d:k[0][g[d>>>24]]^k[1][g[d>>16&255]]^k[2][g[d>>8&255]]^k[3][g[d&255]]}ka(a,[{key:"encrypt",value:function(a){return this._crypt(a,0)}},{key:"decrypt",value:function(a){return this._crypt(a,
1)}},{key:"_precompute",value:function(){var a=this._tables[0],c=this._tables[1],d=a[4],e=c[4],f,g,k,l=[],h=[],w,n,m,v;for(f=0;256>f;f++)h[(l[f]=f<<1^283*(f>>7))^f]=f;for(g=k=0;!d[g];g^=w||1,k=h[k]||1)for(m=k^k<<1^k<<2^k<<3^k<<4,m=m>>8^m&255^99,d[g]=m,e[m]=g,n=l[f=l[w=l[g]]],v=16843009*n^65537*f^257*w^16843008*g,n=257*l[m]^16843008*m,f=0;4>f;f++)a[f][g]=n=n<<24^n>>>8,c[f][m]=v=v<<24^v>>>8;for(f=0;5>f;f++)a[f]=a[f].slice(0),c[f]=c[f].slice(0)}},{key:"_crypt",value:function(a,c){if(4!==a.length)throw Error("invalid aes block size");
var b=this._key[c],e=a[0]^b[0],f=a[c?3:1]^b[1],g=a[2]^b[2];a=a[c?1:3]^b[3];var k,l,h,w=b.length/4-2,n,m=4,v=[0,0,0,0];k=this._tables[c];var y=k[0],db=k[1],q=k[2],r=k[3],u=k[4];for(n=0;n<w;n++)k=y[e>>>24]^db[f>>16&255]^q[g>>8&255]^r[a&255]^b[m],l=y[f>>>24]^db[g>>16&255]^q[a>>8&255]^r[e&255]^b[m+1],h=y[g>>>24]^db[a>>16&255]^q[e>>8&255]^r[f&255]^b[m+2],a=y[a>>>24]^db[e>>16&255]^q[f>>8&255]^r[g&255]^b[m+3],m+=4,e=k,f=l,g=h;for(n=0;4>n;n++)v[c?3&-n:n]=u[e>>>24]<<24^u[f>>16&255]<<16^u[g>>8&255]<<8^u[a&
255]^b[m++],k=e,e=f,f=g,g=a,a=k;return v}}]);return a}();xb.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];var Y=function(){function a(b){ja(this,a);for(var c=[],d=0;4>d;d++)c[d]=b.readInt32BE(4*d);this.aes=new xb(c)}ka(a,[{key:"encryptCBC",value:function(a){var b=[0,0,0,0],d=Array(4),e,f;for(e=0;e<a.length;e+=16){for(f=0;4>f;f++)d[f]=a.readUInt32BE(e+4*f,!1)^b[f];b=this.aes.encrypt(d);for(f=0;4>f;f++)a.writeInt32BE(b[f],e+4*f,!1)}}},{key:"decryptCBC",value:function(a){var b=[0,0,0,0],d=Array(4),
e,f,g;for(f=0;f<a.length;f+=16){for(g=0;4>g;g++)d[g]=a.readUInt32BE(f+4*g,!1);e=d;d=this.aes.decrypt(d);for(g=0;4>g;g++)a.writeInt32BE(d[g]^b[g],f+4*g,!1);b=e}}},{key:"stringhash",value:function(a){for(var b=[0,0,0,0],d=0;d<a.length;d+=4)b[d/4&3]^=a.readInt32BE(d,!0);for(a=16384;a--;)b=this.aes.encrypt(b);a=h.allocUnsafe(8);a.writeInt32BE(b[0],0,!0);a.writeInt32BE(b[2],4,!0);return a}},{key:"encryptECB",value:function(a){for(var b=[],d=0;d<a.length;d+=16)b[0]=a.readInt32BE(d,!1),b[1]=a.readInt32BE(d+
4,!1),b[2]=a.readInt32BE(d+8,!1),b[3]=a.readInt32BE(d+12,!1),b=this.aes.encrypt(b),a.writeInt32BE(b[0],d,!1),a.writeInt32BE(b[1],d+4,!1),a.writeInt32BE(b[2],d+8,!1),a.writeInt32BE(b[3],d+12,!1);return a}},{key:"decryptECB",value:function(a){for(var b=[],d=0;d<a.length;d+=16)b[0]=a.readInt32BE(d,!1),b[1]=a.readInt32BE(d+4,!1),b[2]=a.readInt32BE(d+8,!1),b[3]=a.readInt32BE(d+12,!1),b=this.aes.decrypt(b),a.writeInt32BE(b[0],d,!1),a.writeInt32BE(b[1],d+4,!1),a.writeInt32BE(b[2],d+8,!1),a.writeInt32BE(b[3],
d+12,!1);return a}}]);return a}(),Ac=function(){function a(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;ja(this,a);this.aes=b.aes;this.nonce=[c.readInt32BE(0),c.readInt32BE(4)];this.increment=131072;this.posNext=d+this.increment;this.pos=d;this.ctr=[this.nonce[0],this.nonce[1],0,0];this.mac=[this.ctr[0],this.ctr[1],this.ctr[0],this.ctr[1]];this.macs=[];0!==d&&this.incrementCTRBuffer(d/16)}ka(a,[{key:"condensedMac",value:function(){this.mac&&(this.macs.push(this.mac),this.mac=
void 0);for(var a=[0,0,0,0],c=0;c<this.macs.length;c++){for(var d=0;4>d;d++)a[d]^=this.macs[c][d];a=this.aes.encrypt(a)}c=h.allocUnsafe(8);c.writeInt32BE(a[0]^a[1],0);c.writeInt32BE(a[2]^a[3],4);return c}},{key:"encrypt",value:function(a){for(var b=0;b<a.length;b+=16){var d=[];d[0]=a.readInt32BE(b,!0);d[1]=a.readInt32BE(b+4,!0);d[2]=a.readInt32BE(b+8,!0);d[3]=a.readInt32BE(b+12,!0);this.mac[0]^=d[0];this.mac[1]^=d[1];this.mac[2]^=d[2];this.mac[3]^=d[3];this.mac=this.aes.encrypt(this.mac);var e=this.aes.encrypt(this.ctr);
a.writeInt32BE(d[0]^e[0],b,!0);a.writeInt32BE(d[1]^e[1],b+4,!0);a.writeInt32BE(d[2]^e[2],b+8,!0);a.writeInt32BE(d[3]^e[3],b+12,!0);this.incrementCTR()}}},{key:"decrypt",value:function(a){for(var b=0;b<a.length;b+=16){var d=[],e=this.aes.encrypt(this.ctr);d[0]=a.readInt32BE(b,!0)^e[0];d[1]=a.readInt32BE(b+4,!0)^e[1];d[2]=a.readInt32BE(b+8,!0)^e[2];d[3]=a.readInt32BE(b+12,!0)^e[3];a.writeInt32BE(d[0],b,!0);a.writeInt32BE(d[1],b+4,!0);a.writeInt32BE(d[2],b+8,!0);a.writeInt32BE(d[3],b+12,!0);this.mac[0]^=
a.readInt32BE(b,!0);this.mac[1]^=a.readInt32BE(b+4,!0);this.mac[2]^=a.readInt32BE(b+8,!0);this.mac[3]^=a.readInt32BE(b+12,!0);this.mac=this.aes.encrypt(this.mac);this.incrementCTR()}}},{key:"incrementCTR",value:function(){this.ctr[3]++;2147483648===this.ctr[3]?this.ctr[3]=-2147483648:0===this.ctr[3]&&this.ctr[2]++;this.pos+=16;this.pos>=this.posNext&&(this.macs.push(this.mac),this.mac=[this.ctr[0],this.ctr[1],this.ctr[0],this.ctr[1]],1048576>this.increment&&(this.increment+=131072),this.posNext+=
this.increment)}},{key:"incrementCTRBuffer",value:function(a){for(var b=0;b<a;b++)this.incrementCTR()}}]);return a}(),S={},Fd=Math.log(2),aa="undefined"!==typeof window?window:self;t.log={trace:I,debug:I,info:I,warn:I,error:I};var ga=0;t.withCredentials=!1;t.DEFAULT_TIMEOUT=18E4;t.defaults=function(a,b){b=function(b){return function(c,d){c="string"===typeof c?{uri:c}:JSON.parse(JSON.stringify(c));for(var e in a)void 0===c[e]&&(c[e]=a[e]);return b(c,d)}};var c=b(t);c.get=b(t.get);c.post=b(t.post);
c.put=b(t.put);c.head=b(t.head);return c};["get","put","post","head"].forEach(function(a){var b=a.toUpperCase();a=a.toLowerCase();t[a]=function(a){"string"===typeof a?a={method:b,uri:a}:(a=JSON.parse(JSON.stringify(a)),a.method=b);var c=[a].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,c)}});var Hc=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},Md=Object.keys||function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,
c)&&b.push(c);return b},Yd={encode:Ab,stringify:Ab,decode:bb,parse:bb},Pc={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried 4 times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",
5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",
12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"},Qc=function(a){function b(a){ja(this,b);var c=fb(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));
c.keepalive=a;c.counterId=Math.random().toString().substr(2,10);c.gateway="https://eu.api.mega.co.nz/";c.requestModule=t;return c}eb(b,a);ka(b,[{key:"request",value:function(a,b){var c=this,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,g={id:(this.counterId++).toString()};this.sid&&(g.sid=this.sid);"object"===zb(a._querystring)&&(Object.assign(g,a._querystring),delete a._querystring);this.requestModule({uri:this.gateway+"cs",qs:g,method:"POST",json:[a],gzip:!0},function(e,f,g){if(e)return b(e);
if(!g)return b(Error("Empty response"));g.length&&(g=g[0]);if(!e&&"number"===typeof g&&0>g){if(-3===g&&4>d)return setTimeout(function(){c.request(a,b,d+1)},1E3*Math.pow(2,d+1));e=Error(Pc[-g])}else c.keepalive&&g&&g.sn&&c.pull(g.sn);b(e,g)})}},{key:"pull",value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.sn=this.requestModule({uri:this.gateway+"sc",qs:{sn:a,sid:this.sid},method:"POST",json:!0,body:"sc?"+Yd.stringify({sn:a})},function(d,e,k){b.sn=void 0;if(!d&&
"number"===typeof k&&0>k){if(-3===k&&4>c)return setTimeout(function(){b.pull(a,c+1)},1E3*Math.pow(2,c+1));d=Error(Pc[-k])}if(d)throw d;k.w?b.wait(k.w,a):k.sn&&(k.a&&b.emit("sc",k.a),b.pull(k.sn))})}},{key:"wait",value:function(a,b){var c=this;this.sn=this.requestModule({uri:a,method:"POST"},function(a,d,e){c.sn=void 0;if(a)throw Error("mega server wait req failed");c.pull(b)})}},{key:"close",value:function(){this.sn&&this.sn.abort()}}]);return b}(q),Ma=J(function(a){function b(){this.source=null;
this.dataSize=0;this.maxDataSize=1048576;this.pauseStream=!0;this._released=this._maxDataSizeExceeded=!1;this._bufferedEvents=[]}var c=A.Stream;a.exports=b;Cb.inherits(b,c);b.create=function(a,b){var c=new this;b=b||{};for(var d in b)c[d]=b[d];c.source=a;var e=a.emit;a.emit=function(){c._handleEmit(arguments);return e.apply(a,arguments)};a.on("error",function(){});c.pauseStream&&a.pause();return c};Object.defineProperty(b.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});
b.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};b.prototype.resume=function(){this._released||this.release();this.source.resume()};b.prototype.pause=function(){this.source.pause()};b.prototype.release=function(){this._released=!0;this._bufferedEvents.forEach(function(a){this.emit.apply(this,a)}.bind(this));this._bufferedEvents=[]};b.prototype.pipe=function(){var a=c.prototype.pipe.apply(this,arguments);this.resume();return a};b.prototype._handleEmit=
function(a){this._released?this.emit.apply(this,a):("data"===a[0]&&(this.dataSize+=a[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(a))};b.prototype._checkIfMaxDataSizeExceeded=function(){this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize||(this._maxDataSizeExceeded=!0,this.emit("error",Error("DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.")))}}),Rc=Ma&&"object"===typeof Ma&&"default"in Ma?Ma["default"]:Ma,Na=J(function(a){function b(){this.writable=
!1;this.readable=!0;this.dataSize=0;this.maxDataSize=2097152;this.pauseStreams=!0;this._released=!1;this._streams=[];this._currentStream=null}var c=A.Stream;a.exports=b;Cb.inherits(b,c);b.create=function(a){var b=new this;a=a||{};for(var c in a)b[c]=a[c];return b};b.isStreamLike=function(a){return"function"!==typeof a&&"string"!==typeof a&&"boolean"!==typeof a&&"number"!==typeof a&&!Ta(a)};b.prototype.append=function(a){if(b.isStreamLike(a)){if(!(a instanceof Rc)){var c=Rc.create(a,{maxDataSize:Infinity,
pauseStream:this.pauseStreams});a.on("data",this._checkDataSize.bind(this));a=c}this._handleErrors(a);this.pauseStreams&&a.pause()}this._streams.push(a);return this};b.prototype.pipe=function(a,b){c.prototype.pipe.call(this,a,b);this.resume();return a};b.prototype._getNext=function(){this._currentStream=null;var a=this._streams.shift();"undefined"==typeof a?this.end():"function"!==typeof a?this._pipeNext(a):a(function(a){b.isStreamLike(a)&&(a.on("data",this._checkDataSize.bind(this)),this._handleErrors(a));
this._pipeNext(a)}.bind(this))};b.prototype._pipeNext=function(a){this._currentStream=a;b.isStreamLike(a)?(a.on("end",this._getNext.bind(this)),a.pipe(this,{end:!1})):(this.write(a),this._getNext())};b.prototype._handleErrors=function(a){var b=this;a.on("error",function(a){b._emitError(a)})};b.prototype.write=function(a){this.emit("data",a)};b.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),
this.emit("pause"))};b.prototype.resume=function(){this._released||(this.writable=this._released=!0,this._getNext());this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume();this.emit("resume")};b.prototype.end=function(){this._reset();this.emit("end")};b.prototype.destroy=function(){this._reset();this.emit("close")};b.prototype._reset=function(){this.writable=!1;this._streams=[];this._currentStream=null};b.prototype._checkDataSize=function(){this._updateDataSize();
this.dataSize<=this.maxDataSize||this._emitError(Error("DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded."))};b.prototype._updateDataSize=function(){this.dataSize=0;var a=this;this._streams.forEach(function(b){b.dataSize&&(a.dataSize+=b.dataSize)});this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};b.prototype._emitError=function(a){this._reset();this.emit("error",a)}}),Zd=Na&&"object"===typeof Na&&"default"in Na?Na["default"]:Na,Qd=/[^\x20-\x7E]/,
Od=/[\x2E\u3002\uFF0E\uFF61]/g,Jc={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input \x3e\x3d 0x80 (not a basic code point)","invalid-input":"Invalid input"},ta=Math.floor,Bb=String.fromCharCode,$d=/^([a-z0-9.+-]+:)/i,Rd=/:[0-9]*$/,ae=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,be="{}|\\^`".split("").concat('\x3c\x3e"` \r\n\t'.split("")),Fb=["'"].concat(be),Sc=["%","/","?",";","#"].concat(Fb),Tc=["/","?","#"],Uc=/^[+a-z0-9A-Z_-]{0,63}$/,ce=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,
de={javascript:!0,"javascript:":!0},Gb={javascript:!0,"javascript:":!0},ua={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};T.prototype.parse=function(a,b,c){a:{var d=a;if(!na(d))throw new TypeError("Parameter 'url' must be a string, not "+typeof d);a=d.indexOf("?");a=-1!==a&&a<d.indexOf("#")?"?":"#";d=d.split(a);d[0]=d[0].replace(/\\/g,"/");d=d.join(a);a=d.trim();if(!c&&1===d.split("#").length&&(d=ae.exec(a))){this.href=this.path=a;this.pathname=
d[1];d[2]?(this.search=d[2],this.query=b?bb(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={});b=this;break a}if(d=$d.exec(a)){var d=d[0],e=d.toLowerCase();this.protocol=e;a=a.substr(d.length)}if(c||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===a.substr(0,2);!f||d&&Gb[d]||(a=a.substr(2),this.slashes=!0)}if(!Gb[d]&&(f||d&&!ua[d])){d=-1;for(c=0;c<Tc.length;c++)f=a.indexOf(Tc[c]),-1!==f&&(-1===d||f<d)&&(d=f);f=-1===d?a.lastIndexOf("@"):a.lastIndexOf("@",d);-1!==f&&(c=
a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(c));d=-1;for(c=0;c<Sc.length;c++)f=a.indexOf(Sc[c]),-1!==f&&(-1===d||f<d)&&(d=f);-1===d&&(d=a.length);this.host=a.slice(0,d);a=a.slice(d);Mc(this);this.hostname=this.hostname||"";f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!f){var g=this.hostname.split(/\./);c=0;for(d=g.length;c<d;c++){var k=g[c];if(k&&!k.match(Uc)){for(var l="",h=0,w=k.length;h<w;h++)l=127<k.charCodeAt(h)?l+"x":l+k[h];if(!l.match(Uc)){d=g.slice(0,
c);c=g.slice(c+1);if(k=k.match(ce))d.push(k[1]),c.unshift(k[2]);c.length&&(a="/"+c.join(".")+a);this.hostname=d.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();f||(this.hostname=Pd(this.hostname));c=this.port?":"+this.port:"";this.host=(this.hostname||"")+c;this.href+=this.host;f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!de[e])for(c=0,d=Fb.length;c<d;c++)f=Fb[c],-1!==a.indexOf(f)&&(k=encodeURIComponent(f),k===
f&&(k=escape(f)),a=a.split(f).join(k));c=a.indexOf("#");-1!==c&&(this.hash=a.substr(c),a=a.slice(0,c));c=a.indexOf("?");-1!==c?(this.search=a.substr(c),this.query=a.substr(c+1),b&&(this.query=bb(this.query)),a=a.slice(0,c)):b&&(this.search="",this.query={});a&&(this.pathname=a);ua[e]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)c=this.pathname||"",this.path=c+(this.search||"");this.href=Lc(this);b=this}return b};T.prototype.format=function(){return Lc(this)};T.prototype.resolve=
function(a){return this.resolveObject(Kc(a,!1,!0)).format()};T.prototype.resolveObject=function(a){if(na(a)){var b=new T;b.parse(a,!1,!0);a=b}for(var b=new T,c=Object.keys(this),d=0;d<c.length;d++){var e=c[d];b[e]=this[e]}b.hash=a.hash;if(""===a.href)return b.href=b.format(),b;if(a.slashes&&!a.protocol){c=Object.keys(a);for(d=0;d<c.length;d++)e=c[d],"protocol"!==e&&(b[e]=a[e]);ua[b.protocol]&&b.hostname&&!b.pathname&&(b.path=b.pathname="/");b.href=b.format();return b}var f;if(a.protocol&&a.protocol!==
b.protocol){if(!ua[a.protocol]){c=Object.keys(a);for(d=0;d<c.length;d++)e=c[d],b[e]=a[e];b.href=b.format();return b}b.protocol=a.protocol;if(a.host||Gb[a.protocol])b.pathname=a.pathname;else{for(f=(a.pathname||"").split("/");f.length&&!(a.host=f.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==f[0]&&f.unshift("");2>f.length&&f.unshift("");b.pathname=f.join("/")}b.search=a.search;b.query=a.query;b.host=a.host||"";b.auth=a.auth;b.hostname=a.hostname||a.host;b.port=a.port;if(b.pathname||
b.search)b.path=(b.pathname||"")+(b.search||"");b.slashes=b.slashes||a.slashes;b.href=b.format();return b}var c=b.pathname&&"/"===b.pathname.charAt(0),g=a.host||a.pathname&&"/"===a.pathname.charAt(0),k=c=g||c||b.host&&a.pathname,d=b.pathname&&b.pathname.split("/")||[],e=b.protocol&&!ua[b.protocol];f=a.pathname&&a.pathname.split("/")||[];e&&(b.hostname="",b.port=null,b.host&&(""===d[0]?d[0]=b.host:d.unshift(b.host)),b.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===f[0]?f[0]=a.host:
f.unshift(a.host)),a.host=null),c=c&&(""===f[0]||""===d[0]));if(g)b.host=a.host||""===a.host?a.host:b.host,b.hostname=a.hostname||""===a.hostname?a.hostname:b.hostname,b.search=a.search,b.query=a.query,d=f;else if(f.length)d||(d=[]),d.pop(),d=d.concat(f),b.search=a.search,b.query=a.query;else if(null!=a.search){e&&(b.hostname=b.host=d.shift(),e=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=e.shift(),b.host=b.hostname=e.shift());b.search=a.search;b.query=a.query;if(null!==b.pathname||
null!==b.search)b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");b.href=b.format();return b}if(!d.length)return b.pathname=null,b.path=b.search?"/"+b.search:null,b.href=b.format(),b;g=d.slice(-1)[0];f=(b.host||a.host||1<d.length)&&("."===g||".."===g)||""===g;for(var l=0,h=d.length;0<=h;h--)g=d[h],"."===g?d.splice(h,1):".."===g?(d.splice(h,1),l++):l&&(d.splice(h,1),l--);if(!c&&!k)for(;l--;l)d.unshift("..");!c||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift("");f&&"/"!==d.join("/").substr(-1)&&
d.push("");k=""===d[0]||d[0]&&"/"===d[0].charAt(0);e&&(b.hostname=b.host=k?"":d.length?d.shift():"",e=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=e.shift(),b.host=b.hostname=e.shift());(c=c||b.host&&d.length)&&!k&&d.unshift("");d.length?b.pathname=d.join("/"):(b.pathname=null,b.path=null);if(null!==b.pathname||null!==b.search)b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");b.auth=a.auth||b.auth;b.slashes=b.slashes||a.slashes;b.href=b.format();return b};T.prototype.parseHost=
function(){return Mc(this)};var Oa=J(function(a){function b(a){if(!(this instanceof b))return new b(a);this._toSkip=a.skip;c.call(this,a)}var c=A.Transform;Cb.inherits(b,c);b.prototype._transform=function(a,b,c){0==this._toSkip?this.push(a):this._toSkip>a.length?this._toSkip-=a.length:(this._toSkip!==a.length&&this.push(a.slice(this._toSkip)),this._toSkip=0);c()};a.exports=b}),ee=Oa&&"object"===typeof Oa&&"default"in Oa?Oa["default"]:Oa,Vc=new Qc(!1),N=function(a){function b(a){ja(this,b);var c=fb(this,
(b.__proto__||Object.getPrototypeOf(b)).call(this));c.checkConstructorArgument(a.downloadId);c.checkConstructorArgument(a.key);c.checkConstructorArgument(a.loadedFile);c.downloadId=a.downloadId;c.key=a.key?H(a.key):null;c.type=a.directory?1:0;c.directory=!!a.directory;c.api=Vc;c.loadedFile=a.loadedFile;return c}eb(b,a);ka(b,[{key:"checkConstructorArgument",value:function(a){if("string"===typeof a&&!/^[\w-]+$/.test(a))throw Error('Invalid argument: "'+a+'"');}},{key:"loadMetadata",value:function(a,
b){this.size=b.s||0;this.timestamp=b.ts||0;this.type=b.t;this.directory=!!b.t;this.owner=b.u;this.name=null;if(a&&b.k){var c=b.k.split(":");this.key=H(c[c.length-1]);a.decryptECB(this.key);b.a&&this.decryptAttributes(b.a)}}},{key:"decryptAttributes",value:function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};a=xc(a);ra(this.key).decryptCBC(a);try{a=b.unpackAttributes(a)}catch(e){return c(e)}this.parseAttributes(a);c(null,this);return this}},{key:"parseAttributes",value:function(a){this.attributes=
a;this.name=a.n;this.label=b.LABEL_NAMES[a.lbl||0];this.favorited=!!a.fav}},{key:"loadAttributes",value:function(a){var c=this;"function"!==typeof a&&(a=function(a){if(a)throw a;});this.api.request(this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId},function(d,f){if(d)return a(d);if(c.directory){d=Object.create(null);f=f.f;var e=f.find(function(a){return a.k&&a.h===a.k.split(":")[0]}),k=c.key?new Y(c.key):null;c.nodeId=e.h;c.timestamp=e.ts;d[e.h]=c;var l=
!0,h=!1,w=void 0;try{for(var n=f[Symbol.iterator](),m;!(l=(m=n.next()).done);l=!0){var v=m.value;if(v!==e){var y=new b(v,c.storage);y.loadMetadata(k,v);y.downloadId=[c.downloadId,v.h];d[v.h]=y}}}catch(Hb){h=!0,w=Hb}finally{try{!l&&n.return&&n.return()}finally{if(h)throw w;}}n=!0;m=!1;v=void 0;try{for(var q=f[Symbol.iterator](),r;!(n=(r=q.next()).done);n=!0){var u=r.value,t=d[u.p];if(t){var x=d[u.h];t.children||(t.children=[]);t.children.push(x);x.parent=t}}}catch(Hb){m=!0,v=Hb}finally{try{!n&&q.return&&
q.return()}finally{if(m)throw v;}}c.loadMetadata(k,e);c.loadedFile?(q=d[c.loadedFile],"undefined"===typeof q?a(Error("Node (file or folder) not found in folder")):a(null,q)):a(null,c)}else c.size=f.s,c.decryptAttributes(f.at,a)});return this}},{key:"download",value:function(a,b){"function"===typeof a&&(b=a,a={});a||(a={});var c=a.start||0,d=a.returnCiphertext?c:c-c%16,g=a.end||null,k=a.maxConnections||4,l=a.initialChunkSize||131072,h=a.chunkSizeIncrement||131072,w=a.maxChunkSize||1048576,n={a:"g",
g:1,ssl:2};this.nodeId?n.n=this.nodeId:Array.isArray(this.downloadId)?(n._querystring={n:this.downloadId[0]},n.n=this.downloadId[1]):n.p=this.downloadId;if(this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!a.returnCiphertext)throw Error("Can't download: key isn't defined");var m=this.key&&!a.returnCiphertext?Bc(this.key,{start:d,disableVerification:0!==d||null!==g}):new qa,v=d===c?m:m.pipe(new ee({skip:c-d})),q=a.requestModule||this.api.requestModule;(this.api||
Vc).request(n,function(a,b){function e(a){200!==a.statusCode&&v.emit("error",509===a.statusCode?Error("Bandwidth limit reached: "+a.headers["x-mega-time-left"]+" seconds until it resets"):Error("MEGA returned a "+a.statusCode+" status code"))}function f(a){v.emit("error",Error("Connection error: "+a.message))}if(a)return v.emit("error",a);if("string"!==typeof b.g||"http"!==b.g.substr(0,4))return v.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));g||(g=b.s-
1);if(c>g)return v.emit("error",Error("You can't download past the end of the file."));if(1===k)a=q(b.g+"/"+d+"-"+g),a.on("error",f),a.on("response",e),a.pipe(m);else{var n=Zd.create(),p=d,y=l,r=!1;v.on("error",function(){r=!0});v.on("close",function(){r=!0});a=function fe(){if(!r){var a=Math.min(g,p+y-1);if(!(a<p)){var c=q(b.g+"/"+p+"-"+a);c.on("end",fe);c.on("error",f);c.on("response",e);n.append(c);p=a+1;y<w&&(y+=h)}}};n.on("error",function(a){return v.emit("error",a)});for(var u=0;u<k;u++)a();
n.pipe(m)}var t=0;v.on("data",function(a){t+=a.length;v.emit("progress",{bytesLoaded:t,bytesTotal:b.s})})});b&&wb(v,b);return v}},{key:"link",value:function(a,b){1===arguments.length&&"function"===typeof a&&(b=a,a={noKey:!1});"boolean"===typeof a&&(a={noKey:a});var c="https://mega.nz/#"+(this.directory?"F":"")+"!"+this.downloadId;!a.noKey&&this.key&&(c+="!"+C(this.key));!a.noKey&&this.loadedFile&&(c+="!"+this.loadedFile);b(null,c)}}]);return b}(q);N.LABEL_NAMES=" red orange yellow green blue purple grey".split(" ");
N.fromURL=function(a){if("object"===("undefined"===typeof a?"undefined":zb(a)))return new N(a);a=Kc(a);if("mega.nz"!==a.hostname&&"mega.co.nz"!==a.hostname)throw Error("Invalid URL: wrong hostname");if(!a.hash)throw Error("Invalid URL: no hash");a=a.hash.split("!");if("#"!==a[0]&&"#F"!==a[0])throw Error("Invalid URL: format not recognized");if(1>=a.length)throw Error("Invalid URL: too few arguments");if(a.length>=("#"===a[0]?4:5))throw Error("Invalid URL: too many arguments");return new N({downloadId:a[1],
key:a[2],directory:"#F"===a[0],loadedFile:a[3]})};N.unpackAttributes=function(a){for(var b=0;b<a.length&&a.readUInt8(b);)b++;a=a.slice(0,b).toString();if('MEGA{"'!==a.substr(0,6))throw Error("Attributes could not be decrypted with provided key.");return JSON.parse(a.substr(4).replace(/\0|[^}]*$/g,""))};var Wc={},Xc=function(a){function b(a,d){ja(this,b);var c=fb(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.storage=d;c.api=d.api;c.nodeId=a.h;c.timestamp=a.ts;c.type=a.t;c.directory=
!!c.type;if(a.k){var f=a.k.split(":")[0],g=d.shareKeys[f];d=d.aes;g&&((d=Wc[f])||(d=Wc[f]=new Y(g)));c.loadMetadata(d,a)}return c}eb(b,a);ka(b,[{key:"loadAttributes",value:function(){throw Error("This is not needed for files loaded from logged in sessions");}},{key:"mkdir",value:function(a,d){var c=this;if(!this.directory)throw Error("node isn't a directory");"string"===typeof a&&(a={name:a});a.attributes||(a.attributes={});a.name&&(a.attributes.n=a.name);if(!a.attributes.n)throw Error("file name is required");
a.target||(a.target=this);a.key||(a.key=h.from(ab(32)));if(32!==a.key.length)throw Error("wrong key length, must be 256bit");var f=a.key,g=b.packAttributes(a.attributes);ra(f).encryptCBC(g);var k=h.from(f);this.storage.aes.encryptECB(k);a={a:"p",t:a.target.nodeId?a.target.nodeId:a.target,n:[{h:"xxxxxxxx",t:1,a:C(g),k:C(k)}]};g=Ga(this.storage.shareKeys,this);0<g.length&&(a.cr=cb(this.storage,[{nodeId:"xxxxxxxx",key:f}],g));this.api.request(a,function(a,b){a?d&&d(a):(a=c.storage._importFile(b.f[0]),
c.storage.emit("add",a),d&&d(null,a))})}},{key:"upload",value:function(a,d,e){var c=this;if(!this.directory)throw Error("node is not a directory");if(2===arguments.length&&"function"===typeof d){var g=[d,null];e=g[0];d=g[1]}"string"===typeof a&&(a={name:a});a.attributes||(a.attributes={});a.name&&(a.attributes.n=a.name);if(!a.attributes.n)throw Error("File name is required.");a.target||(a.target=this);var k=void 0;(g=H(a.key))||(g=ab(24));g instanceof h||(g=h.from(g));if(g.length!==(a.uploadCiphertext?
32:24))throw Error("Wrong key length. Key must be 192bit");a.uploadCiphertext&&(k=g,g=yc(g).slice(0,24));a.key=g;var l=[],g=function(d,f,g,q){if(d)return w(d);g&&0!==g.length?(l[f]=g,0!==f||k||(k=q.key),a.thumbnailImage&&!l[1]||a.previewImage&&!l[2]||!l[0]||(d=b.packAttributes(a.attributes),ra(k).encryptCBC(d),f=h.from(k),c.storage.aes.encryptECB(f),d={h:C(l[0]),t:0,a:C(d),k:C(f)},1!==l.length&&(d.fa=l.slice(1).map(function(a,b){return b+"*"+C(a)}).filter(function(a){return a}).join("/")),f={a:"p",
t:a.target.nodeId?a.target.nodeId:a.target,n:[d]},g=Ga(c.storage.shareKeys,c),0<g.length&&(f.cr=cb(c.storage,[{nodeId:d.h,key:k}],g)),c.api.request(f,function(a,b){if(a)return w(a);a=c.storage._importFile(b.f[0]);c.storage.emit("add",a);p.emit("complete",a);e&&e(null,a)}))):w(Error("Server returned a invalid response while uploading"))};a.thumbnailImage&&this._uploadAttribute(a,a.thumbnailImage,1,g);a.previewImage&&this._uploadAttribute(a,a.previewImage,2,g);var p=this._upload(a,d,0,g),w=function(a){e?
e(a):p.emit("error",a)};return p}},{key:"_upload",value:function(a,b,e,f){var c=this,d=a.uploadCiphertext?fa():zc(a.key),h=fa().pause(),p=Aa(h,d);a=a.size;b&&"function"!==typeof b.pipe&&(a=b.length,p.write(b),p.end());a?this._uploadWithSize(p,a,d,h,e,null,f):p=Aa(Dd(function(a){c._uploadWithSize(p,a,d,h,e,null,f)}),p);b&&"function"===typeof b.pipe&&b.pipe(p);return p}},{key:"_uploadAttribute",value:function(a,b,e,f){var c=this,d=function(b,d){if(b)return f(b);b=d.length;b=16*Math.ceil(b/16)-b;0!==
b&&(d=h.concat([d,h.alloc(b)]));(a.handle?ra(a.key):new Y(a.key.slice(0,16))).encryptCBC(d);b=fa().pause();var g=Aa(b);g.write(d);g.end();c._uploadWithSize(g,d.length,g,b,e,a.handle,f)};b instanceof h?d(null,b):wb(b,d)}},{key:"_uploadWithSize",value:function(a,b,e,f,g,h,l){var c=this,d=0===g?{a:"u",ssl:2,s:b,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:2,s:b};h&&(d.h=h);this.api.request(d,function(d,h){if(d)return l(d);d=c.api.requestModule({method:"POST",uri:h.p+"/"+(0===g?0:g-1),forever:!0,headers:{}});wb(d,
function(a,b){l(a,g,b,e)});var k=0;e.on("data",function(c){k+=c.length;a.emit("progress",{bytesLoaded:k,bytesTotal:b})});e.on("end",function(){if(b&&k!==b)return a.emit("error",Error("Specified data size does not match: "+b+" !\x3d\x3d "+k))});e.pipe(d);f.resume()})}},{key:"uploadAttribute",value:function(a,b,e){var c=this;"string"===typeof a&&(a=["thumbnail","preview"].indexOf(a));if(0!==a&&1!==a)throw Error("Invalid attribute type");this._uploadAttribute({key:this.key,handle:this.nodeId},b,a+1,
function(b,d,f,h){if(b)return e(b);b={a:"pfa",n:c.nodeId,fa:a+"*"+C(f)};c.api.request(b,function(a,b){if(a)return e(a);e(null,c)})})}},{key:"delete",value:function(a,b){"function"===typeof a&&(b=a,a=void 0);"undefined"===typeof a&&(a=this.parent===this.storage.trash);a?this.api.request({a:"d",n:this.nodeId},b):this.moveTo(this.storage.trash,b);return this}},{key:"moveTo",value:function(a,b){"string"===typeof a&&(a=this.storage.files[a]);if(!(a instanceof N))throw Error("target must be a folder or a nodeId");
var c={a:"m",n:this.nodeId,t:a.nodeId};a=Ga(this.storage.shareKeys,a);0<a.length&&(c.cr=cb(this.storage,[this],a));this.api.request(c,b);return this}},{key:"setAttributes",value:function(a,d){var c=this;Object.assign(this.attributes,a);a=b.packAttributes(this.attributes);ra(this.key).encryptCBC(a);this.api.request({a:"a",n:this.nodeId,at:C(a)},function(){c.parseAttributes(c.attributes);d&&d()});return this}},{key:"rename",value:function(a,b){this.setAttributes({n:a},b);return this}},{key:"setLabel",
value:function(a,b){"string"===typeof a&&(a=N.LABEL_NAMES.indexOf(a));if("number"!==typeof a||Math.floor(a)!==a||0>a||7<a)throw Error("label must be a integer between 0 and 7 or a valid label name");this.setAttributes({lbl:a},b);return this}},{key:"setFavorite",value:function(a,b){this.setAttributes({fav:a?1:0},b);return this}},{key:"link",value:function(a,b){var c=this;1===arguments.length&&"function"===typeof a&&(b=a,a={noKey:!1});"boolean"===typeof a&&(a={noKey:a});var d=a.__folderKey;if(this.directory&&
!d)return this.shareFolder(a,b),this;this.api.request({a:"l",n:this.nodeId},function(e,f){if(e)return b(e);e="https://mega.nz/#"+(d?"F":"")+"!"+f;!a.noKey&&c.key&&(e+="!"+C(d||c.key));b(null,e)});return this}},{key:"shareFolder",value:function(a,b){var c=this;if(!this.directory)throw Error("node isn't a folder");var d=this.nodeId,g=this.storage.shareKeys[d];if(g)return this.link(Object.assign({__folderKey:g},a),b),this;var k=H(a.key);k||(k=ab(16));k instanceof h||(k=h.from(k));if(16!==k.length)z(function(){b(Error("share key must be 16 byte / 22 characters"))});
else return this.storage.shareKeys[d]=k,g=h.from(d+d),this.storage.aes.encryptECB(g),d={a:"s2",n:d,s:[{u:"EXP",r:0}],ok:C(this.storage.aes.encryptECB(h.from(k))),ha:C(g),cr:cb(this.storage,this)},this.api.request(d,function(){c.link(Object.assign({__folderKey:k},a),b)}),this}},{key:"unshareFolder",value:function(a,b){a={a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]};delete this.storage.shareKeys[this.nodeId];this.api.request(a,function(){b&&b()});return this}}]);return b}(N);Xc.packAttributes=function(a){a=
JSON.stringify(a);a=h.from("MEGA"+a);var b=h.alloc(16*Math.ceil(a.length/16));a.copy(b);return b};var ha=function(a){function b(a,d){ja(this,b);var c=fb(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));1===arguments.length&&"function"===typeof a&&(d=a,a={});if(!a.email)throw Error("starting a session without credentials isn't supported");d||(d=function(a){if(a)throw a;});a.keepalive=void 0===a.keepalive?!0:!!a.keepalive;a.autoload=void 0===a.autoload?!0:!!a.autoload;a.autologin=void 0===a.autologin?
!0:!!a.autologin;c.api=new Qc(a.keepalive);c.files={};c.options=a;a.autologin?c.login(d):d(null,c);c.status="closed";return c}eb(b,a);ka(b,[{key:"login",value:function(a){var b=this,c=function(){b.status="ready";a(null,b);b.emit("ready",b)},f=function(a){b.api.request({a:"ug"},function(d,e){if(d)return a(d);b.name=e.name;b.user=e.u;b.options.autoload?b.reload(!0,function(b){if(b)return a(b);c()}):c()})};this.email=this.options.email;var g=Ed(h.from(this.options.password));delete this.options.password;
var k=new Y(g),g=C(k.stringhash(h.from(this.email)));this.api.request({a:"us",user:this.email,uh:g},function(c,d){if(c)return a(c);b.key=H(d.k);k.decryptECB(b.key);b.aes=new Y(b.key);c=H(d.csid);a:{d=b.aes.decryptECB(H(d.privk));for(var e=[],g=0;4>g;g++){var l=(256*d[0]+d[1]+7>>3)+2;e[g]=Fc(d.toString("binary").substr(0,l));if("number"===typeof e[g]){if(4!==g||16<=d.length){d=!1;break a}break}d=d.slice(l)}d=e}if(!d)throw Error("invalid credentials");var g=d,p=Fc(c.toString("binary")),q=g[2];c=g[0];
e=g[1];g=g[3];l=Ec(sa(p,c),sa(q,G(c,[1])),c);p=Ec(sa(p,e),sa(q,G(e,[1])),e);q=G(p,l);0===q.length?(q=G(l,p),q=sa(Z(q,g),e),q=G(e,q)):q=sa(Z(q,g),e);c=Cc(Z(q,c),l);var e=1,g=0,l=[0],p=1,q=0,r=28*c.length,u="",t;for(t=0;t<r;t++)c[g]&e&&(l[q]|=p),255<(p<<=1)&&(p=1,l[++q]=0),268435455<(e<<=1)&&(e=1,g++);for(;0<=q&&0===l[q];)q--;for(t=0;t<=q;t++)u=String.fromCharCode(l[t])+u;c=h.from(u,"binary");c=C(c.slice(0,43));b.api.sid=b.sid=c;b.RSAPrivateKey=d;f(a)});this.status="connecting"}},{key:"reload",value:function(a,
b){var c=this;if("function"===typeof a){var d=[b,a];a=d[0];b=d[1]}if("connecting"===this.status&&!a)return this.once("ready",this.reload.bind(this,a,b));this.mounts=[];this.api.request({a:"f",c:1},function(a,d){if(a)return b(a);c.shareKeys=d.ok.reduce(function(a,b){var d=b.h,e=c.aes.encryptECB(h.from(d+d));var f=H(b.ha);if(f.length!==e.length)e=!1;else{for(var g=f.length,k=0,l=0;l<g;l++)k|=f[l]^e[l];e=0===k}e&&(a[d]=c.aes.decryptECB(H(b.k)));return a},{});d.f.forEach(function(a){return c._importFile(a)});
b(null,c.mounts)});this.api.on("sc",function(a){var b={};a.forEach(function(a){if("u"===a.a){var d=c.files[a.n];d&&(d.timestamp=a.ts,d.decryptAttributes(a.at,function(){}),d.emit("update"),c.emit("update",d))}else"d"===a.a?b[a.n]=!0:"t"===a.a&&a.t.f.forEach(function(a){var d=c.files[a.h];if(d){delete b[a.h];var e=d.parent;e.nodeId!==a.p&&(e.children.splice(e.children.indexOf(d),1),d.parent=c.files[a.p],d.parent.children||(d.parent.children=[]),d.parent.children.push(d),d.emit("move",e),c.emit("move",
d,e))}else c.emit("add",c._importFile(a))})});Object.keys(b).forEach(function(a){a=c.files[a];var b=a.parent;b.children.splice(b.children.indexOf(a),1);c.emit("delete",a);a.emit("delete")})})}},{key:"_importFile",value:function(a){if(!this.files[a.h]){var c=this.files[a.h]=new Xc(a,this);a.t===b.NODE_TYPE_DRIVE&&(this.root=c,c.name="Cloud Drive");a.t===b.NODE_TYPE_RUBBISH_BIN&&(this.trash=c,c.name="Rubbish Bin");a.t===b.NODE_TYPE_INBOX&&(this.inbox=c,c.name="Inbox");1<a.t&&this.mounts.push(c);if(a.p){var e=
this.files[a.p];e.children||(e.children=[]);e.children.push(c);c.parent=e}}return this.files[a.h]}},{key:"mkdir",value:function(a,b){var c=this;if("ready"!==this.status)this.on("ready",function(){return c.root.mkdir(a,b)});else return this.root.mkdir(a,b)}},{key:"upload",value:function(a,b,e){var c=this;if("ready"!==this.status)this.on("ready",function(){return c.root.upload(a,b,e)});else return this.root.upload(a,b,e)}},{key:"close",value:function(){this.status="closed";this.api.close()}}]);return b}(q);
ha.NODE_TYPE_FILE=0;ha.NODE_TYPE_DIR=1;ha.NODE_TYPE_DRIVE=2;ha.NODE_TYPE_INBOX=3;ha.NODE_TYPE_RUBBISH_BIN=4;va.Storage=ha;va.File=N;va.file=N.fromURL;va.encrypt=zc;va.decrypt=Bc;return va});